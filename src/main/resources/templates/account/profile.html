<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
  <head th:replace="~{fragments/client-layout :: head}"></head>
  <body>
    <!-- Navigation -->
    <nav th:replace="~{fragments/client-layout :: navbar}"></nav>

    <div class="container my-5">
      <div class="row">
        <!-- Sidebar -->
        <div class="col-lg-3 mb-4">
          <div class="card border-0 shadow-sm">
            <div class="card-body text-center">
              <img
                th:src="${nhanSu?.avatarUrl} ?: '/images/default-avatar.svg'"
                alt="Avatar"
                class="rounded-circle mb-3"
                style="width: 80px; height: 80px; object-fit: cover"
              />
              <h5
                class="mb-1"
                th:text="${nhanSu?.hoTen} ?: ${account.username}"
              >
                Tên người dùng
              </h5>
              <p class="text-muted small" th:text="${nhanSu?.email} ?: ${account.email}">
                email@example.com
              </p>
              <span
                class="badge bg-success"
                th:if="${account.status.name() == 'ACTIVE'}"
                >Hoạt động</span
              >
              <span
                class="badge bg-warning"
                th:if="${account.status.name() == 'INACTIVE'}"
                >Không hoạt động</span
              >
            </div>
          </div>

          <!-- Navigation Menu -->
          <div class="card border-0 shadow-sm mt-3">
            <div class="list-group list-group-flush">
              <a
                href="/account/profile"
                class="list-group-item list-group-item-action border-0"
                th:classappend="${activeTab == 'profile'} ? 'active' : ''"
              >
                <i class="fas fa-user me-2"></i>Thông tin cá nhân
              </a>
             
              <a
                href="/account/my-posts"
                class="list-group-item list-group-item-action border-0"
                th:classappend="${activeTab == 'posts'} ? 'active' : ''"
              >
                <i class="fas fa-edit me-2"></i>Danh sách bài viết
              </a>
              <a
                href="/news"
                class="list-group-item list-group-item-action border-0"
              >
                <i class="fas fa-compass me-2"></i>Khám phá tin tức
              </a>
              <a
                href="/account/posts"
                class="list-group-item list-group-item-action border-0"
                th:classappend="${activeTab == 'create'} ? 'active' : ''"
              >
                <i class="fas fa-plus me-2"></i>Đăng bài viết
              </a>
              <a
                href="/account/security"
                class="list-group-item list-group-item-action border-0"
                th:classappend="${activeTab == 'security'} ? 'active' : ''"
              >
                <i class="fas fa-shield-alt me-2"></i>Bảo mật
              </a>
            </div>
          </div>
        </div>

        <!-- Main Content -->
        <div class="col-lg-9">
          <div class="card border-0 shadow-sm">
            <div class="card-header bg-white border-bottom d-flex justify-content-between align-items-center">
              <h4 class="mb-0">
                <i class="fas fa-user me-2 text-primary"></i>Thông tin cá nhân
              </h4>
              <a href="/account/profile/edit" class="btn btn-primary btn-sm">
                <i class="fas fa-edit me-2"></i>Chỉnh sửa thông tin
              </a>
            </div>
            <div class="card-body">
              <!-- Alert Messages -->
              <div
                th:if="${success}"
                class="alert alert-success alert-dismissible fade show"
              >
                <i class="fas fa-check-circle me-2"></i>
                <span th:text="${success}"></span>
                <button
                  type="button"
                  class="btn-close"
                  data-bs-dismiss="alert"
                ></button>
              </div>

              <div
                th:if="${error}"
                class="alert alert-danger alert-dismissible fade show"
              >
                <i class="fas fa-exclamation-circle me-2"></i>
                <span th:text="${error}"></span>
                <button
                  type="button"
                  class="btn-close"
                  data-bs-dismiss="alert"
                ></button>
              </div>

              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label class="form-label fw-medium">Họ và tên</label>
                    <div
                      class="form-control bg-light"
                      th:text="${nhanSu?.hoTen} ?: 'Chưa cập nhật'"
                    >
                      Họ và tên
                    </div>
                  </div>

                  <div class="mb-3">
                    <label class="form-label fw-medium">Chức vụ</label>
                    <div
                      class="form-control bg-light"
                      th:text="${nhanSu?.chucVu?.displayName} ?: 'Chưa cập nhật'"
                    >
                      Chức vụ
                    </div>
                  </div>

                  <div class="mb-3">
                    <label class="form-label fw-medium">Email</label>
                    <div
                      class="form-control bg-light"
                      th:text="${nhanSu?.email} ?: 'Chưa cập nhật'"
                    >
                      email@example.com
                    </div>
                  </div>

                  <div class="mb-3">
                    <label class="form-label fw-medium">Điện thoại</label>
                    <div
                      class="form-control bg-light"
                      th:text="${nhanSu?.dienThoai} ?: 'Chưa cập nhật'"
                    >
                      Điện thoại
                    </div>
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="mb-3">
                    <label class="form-label fw-medium">Ban ngành</label>
                    <div
                      class="form-control bg-light"
                      th:text="${nhanSu?.banNganh?.tenBan} ?: 'Chưa cập nhật'"
                    >
                      Ban ngành
                    </div>
                  </div>

                  <div class="mb-3">
                    <label class="form-label fw-medium">Điểm nhóm</label>
                    <div
                      class="form-control bg-light"
                      th:text="${nhanSu?.diemNhom?.tenDiemNhom} ?: 'Chưa cập nhật'"
                    >
                      Điểm nhóm
                    </div>
                  </div>

                  <div class="mb-3">
                    <label class="form-label fw-medium">Ngày sinh</label>
                    <div
                      class="form-control bg-light"
                      th:text="${nhanSu?.ngaySinh != null ? #temporals.format(nhanSu.ngaySinh, 'dd/MM/yyyy') : 'Chưa cập nhật'}"
                    >
                      Ngày sinh
                    </div>
                  </div>

                  <div class="mb-3">
                    <label class="form-label fw-medium">Nhiệm kỳ</label>
                    <div
                      class="form-control bg-light"
                      th:text="${nhanSu?.nhiemKy} ?: 'Chưa cập nhật'"
                    >
                      Nhiệm kỳ
                    </div>
                  </div>
                </div>
              </div>

              <!-- Thông tin bổ sung -->
              <div th:if="${nhanSu?.tieuSu != null and !nhanSu.tieuSu.isEmpty()}" class="mt-4">
                <h6 class="fw-medium mb-3">Tiểu sử</h6>
                <div class="card bg-light">
                  <div class="card-body">
                    <p class="mb-0" th:text="${nhanSu.tieuSu}">Tiểu sử</p>
                  </div>
                </div>
              </div>

              <!-- Trách nhiệm -->
              <div th:if="${nhanSu?.danhSachTrachNhiem != null and !nhanSu.danhSachTrachNhiem.isEmpty()}" class="mt-4">
                <h6 class="fw-medium mb-3">Trách nhiệm</h6>
                <div class="row">
                  <div class="col-12">
                    <ul class="list-group list-group-flush">
                      <li th:each="trachNhiem : ${nhanSu.danhSachTrachNhiem}" 
                          class="list-group-item bg-light border-0 py-2">
                        <i class="fas fa-check-circle text-success me-2"></i>
                        <span th:text="${trachNhiem}">Trách nhiệm</span>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>

              <div class="mt-4">
                <h6 class="fw-medium mb-3">Thống kê hoạt động</h6>
                <div class="row">
                  <div class="col-md-4">
                    <div class="card bg-primary text-white">
                      <div class="card-body text-center">
                        <i class="fas fa-edit fa-2x mb-2"></i>
                        <h4 class="mb-0">0</h4>
                        <small>Bài viết đã đăng</small>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="card bg-success text-white">
                      <div class="card-body text-center">
                        <i class="fas fa-check-circle fa-2x mb-2"></i>
                        <h4 class="mb-0">0</h4>
                        <small>Bài viết đã duyệt</small>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="card bg-warning text-white">
                      <div class="card-body text-center">
                        <i class="fas fa-clock fa-2x mb-2"></i>
                        <h4 class="mb-0">0</h4>
                        <small>Bài viết chờ duyệt</small>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer th:replace="~{fragments/client-layout :: footer}"></footer>

    <!-- Scripts -->
    <div th:replace="~{fragments/client-layout :: scripts}"></div>
  </body>
</html>
