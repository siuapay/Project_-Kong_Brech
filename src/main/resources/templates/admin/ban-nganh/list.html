<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/admin-layout :: head}"></head>
<body class="modern-admin-page">
    <!-- Sidebar -->
    <nav th:replace="~{fragments/admin-layout :: sidebar}"></nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Top Navigation -->
        <nav th:replace="~{fragments/admin-layout :: topnav}"></nav>

        <!-- Content -->
        <div class="container-fluid py-4">
            <!-- Flash Messages -->
            <div th:replace="~{fragments/admin-layout :: messages}"></div>

            <!-- Modern Page Header -->
            <div class="modern-page-header">
                <div class="header-content">
                    <div class="header-info">
                        <div class="header-icon">
                            <i class="fas fa-sitemap"></i>
                        </div>
                        <div class="header-text">
                            <h1 class="header-title">Quản Lý Ban Ngành</h1>
                            <p class="header-subtitle">Quản lý thông tin các ban ngành trong chi hội</p>
                        </div>
                    </div>
                    <div class="header-actions">
                        <a th:href="@{/admin/ban-nganh/new}" class="btn-modern btn-modern-primary">
                            <i class="fas fa-plus me-2"></i>Thêm Ban Ngành
                        </a>
                    </div>
                </div>
            </div>

            <!-- Modern Search Card -->
            <div class="modern-card search-card">
                <div class="card-header">
                    <div class="header-left">
                        <div class="card-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <div class="card-title">
                            <h5>Tìm Kiếm & Bộ Lọc</h5>
                            <p>Tìm kiếm và lọc danh sách ban ngành</p>
                        </div>
                    </div>
                    <button class="btn-toggle" type="button" data-bs-toggle="collapse" 
                            data-bs-target="#advancedFilters" aria-expanded="false">
                        <i class="fas fa-sliders-h"></i>
                        <span>Nâng cao</span>
                    </button>
                </div>
                <div class="card-content">
                    <form method="get" th:action="@{/admin/ban-nganh}" id="filterForm">
                        <!-- Basic Search -->
                        <div class="search-row">
                            <div class="search-input-group">
                                <div class="input-icon">
                                    <i class="fas fa-search"></i>
                                </div>
                                <input type="text" class="form-input" name="search" th:value="${search}" 
                                       placeholder="Tìm kiếm theo tên ban, mã ban..." id="searchInput">
                                <button type="button" class="clear-input-btn" onclick="clearSearchInput()" 
                                        th:style="${search != null and !#strings.isEmpty(search)} ? 'display: block;' : 'display: none;'" 
                                        title="Xóa từ khóa tìm kiếm">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <div class="search-actions">
                                <button type="submit" class="btn-modern btn-modern-primary">
                                    <i class="fas fa-search me-1"></i>Tìm kiếm
                                </button>
                            </div>
                        </div>
                        
                        <!-- Active Filters Display -->
                        <div class="active-filters" th:if="${search != null and !#strings.isEmpty(search)} or ${trangThai != null and !#strings.isEmpty(trangThai)} or ${fromDate != null} or ${toDate != null}">
                            <div class="filters-label">
                                <i class="fas fa-filter me-2"></i>Bộ lọc đang áp dụng:
                            </div>
                            <div class="filter-tags">
                                <!-- Search Filter Tag -->
                                <div class="filter-tag" th:if="${search != null and !#strings.isEmpty(search)}">
                                    <span class="filter-tag-label">Tìm kiếm:</span>
                                    <span class="filter-tag-value" th:text="${search}"></span>
                                    <a th:href="@{/admin/ban-nganh(trangThai=${trangThai}, fromDate=${fromDate}, toDate=${toDate})}" 
                                       class="filter-tag-remove" title="Xóa bộ lọc tìm kiếm">
                                        <i class="fas fa-times"></i>
                                    </a>
                                </div>
                                
                                <!-- Status Filter Tag -->
                                <div class="filter-tag" th:if="${trangThai != null and !#strings.isEmpty(trangThai)}">
                                    <span class="filter-tag-label">Trạng thái:</span>
                                    <span class="filter-tag-value">
                                        <span th:if="${trangThai == 'HOAT_DONG'}">Hoạt động</span>
                                        <span th:if="${trangThai == 'TAM_NGHI'}">Tạm nghỉ</span>
                                        <span th:if="${trangThai == 'GIAI_TAN'}">Giải tán</span>
                                    </span>
                                    <a th:href="@{/admin/ban-nganh(search=${search}, fromDate=${fromDate}, toDate=${toDate})}" 
                                       class="filter-tag-remove" title="Xóa bộ lọc trạng thái">
                                        <i class="fas fa-times"></i>
                                    </a>
                                </div>
                                
                                <!-- Date Filter Tags -->
                                <div class="filter-tag" th:if="${fromDate != null or toDate != null}">
                                    <span class="filter-tag-label">Ngày tạo:</span>
                                    <span class="filter-tag-value">
                                        <span th:if="${fromDate != null}" th:text="${fromDate}"></span>
                                        <span th:if="${fromDate != null and toDate != null}"> - </span>
                                        <span th:if="${toDate != null}" th:text="${toDate}"></span>
                                    </span>
                                    <a th:href="@{/admin/ban-nganh(search=${search}, trangThai=${trangThai})}" 
                                       class="filter-tag-remove" title="Xóa bộ lọc ngày">
                                        <i class="fas fa-times"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Advanced Filters -->
                        <div class="collapse" id="advancedFilters">
                            <div class="advanced-filters">
                                <div class="filter-grid">
                                    <div class="filter-item">
                                        <label class="filter-label">Trạng Thái</label>
                                        <select class="form-select-modern" name="trangThai">
                                            <option value="">Tất cả trạng thái</option>
                                            <option value="HOAT_DONG" th:selected="${trangThai == 'HOAT_DONG'}">Hoạt động</option>
                                            <option value="TAM_NGHI" th:selected="${trangThai == 'TAM_NGHI'}">Tạm nghỉ</option>
                                            <option value="GIAI_TAN" th:selected="${trangThai == 'GIAI_TAN'}">Giải tán</option>
                                        </select>
                                    </div>
                                    <div class="filter-item">
                                        <label class="filter-label">Từ Ngày</label>
                                        <input type="date" class="form-input-modern" name="fromDate" th:value="${fromDate}">
                                    </div>
                                    <div class="filter-item">
                                        <label class="filter-label">Đến Ngày</label>
                                        <input type="date" class="form-input-modern" name="toDate" th:value="${toDate}">
                                    </div>
                                </div>
                                <div class="filter-actions">
                                    <button type="submit" class="btn-modern btn-modern-success">
                                        <i class="fas fa-filter me-1"></i>Áp dụng bộ lọc
                                    </button>
                                    <button type="button" class="btn-modern btn-modern-outline" onclick="clearAdvancedFilters()">
                                        <i class="fas fa-eraser me-1"></i>Xóa bộ lọc nâng cao
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Modern Data Table -->
            <div class="modern-card data-table-card">
                <div class="card-header">
                    <div class="header-left">
                        <div class="card-icon">
                            <i class="fas fa-list"></i>
                        </div>
                        <div class="card-title">
                            <h5>Danh Sách Ban Ngành</h5>
                            <p>Tổng cộng <span class="count-badge" th:text="${banNganhPage.totalElements}">0</span> ban ngành</p>
                        </div>
                    </div>
                    <div class="header-right">
                        <div class="pagination-info">
                            Trang <span th:text="${banNganhPage.number + 1}">1</span> 
                            / <span th:text="${banNganhPage.totalPages}">1</span>
                        </div>
                    </div>
                </div>
                <div class="card-content p-0">
                    <div class="table-container">
                        <table class="modern-table">
                            <thead>
                                <tr>
                                    <th class="th-id">STT</th>
                                    <th class="th-name">Tên Ban</th>
                                    <th class="th-code">Mã Ban</th>

                                    <th class="th-contact">Liên Hệ</th>
                                    <th class="th-staff">Nhân Sự</th>
                                    <th class="th-chaplain">Chấp Sự</th>
                                    <th class="th-status">Trạng Thái</th>
                                    <th class="th-actions">Thao Tác</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr th:each="banNganh, iterStat : ${banNganhPage.content}" class="table-row">
                                    <td class="td-id">
                                        <span class="id-badge" th:text="${banNganhPage.number * banNganhPage.size + iterStat.index + 1}"></span>
                                    </td>
                                    <td class="td-name">
                                        <div class="name-info">
                                            <div class="name-icon">
                                                <i class="fas fa-building"></i>
                                            </div>
                                            <div class="name-details">
                                                <div class="name-title" th:text="${banNganh.tenBan}"></div>
                                                <div class="name-desc" th:if="${banNganh.coTruongBan()}" 
                                                     th:text="'Trưởng: ' + ${banNganh.tenTruongBan}"></div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="td-code">
                                        <span class="code-badge" th:text="${banNganh.maBan}"></span>
                                    </td>
                                  <!--  <td>
                                        <span th:if="${banNganh.moTa}" th:text="${#strings.abbreviate(banNganh.moTa, 50)}">Mô tả</span>
                                        <span th:unless="${banNganh.moTa}" class="text-muted">Chưa có mô tả</span>
                                    </td>-->

                                    <td class="td-contact">
                                        <div class="contact-info">
                                            <div th:if="${banNganh.emailLienHe != null && !banNganh.emailLienHe.isEmpty()}" class="contact-item">
                                                <i class="fas fa-envelope"></i>
                                                <span th:text="${banNganh.emailLienHe}"></span>
                                            </div>
                                            <div th:if="${banNganh.dienThoaiLienHe != null && !banNganh.dienThoaiLienHe.isEmpty()}" class="contact-item">
                                                <i class="fas fa-phone"></i>
                                                <span th:text="${banNganh.dienThoaiLienHe}"></span>
                                            </div>
                                            <span th:unless="${banNganh.emailLienHe != null && !banNganh.emailLienHe.isEmpty()} or ${banNganh.dienThoaiLienHe != null && !banNganh.dienThoaiLienHe.isEmpty()}" class="no-data">Chưa có</span>
                                        </div>
                                    </td>
                                    <td class="td-staff">
                                        <button type="button" class="staff-btn nhan-su" 
                                                th:data-ban-nganh-id="${banNganh.id}"
                                                th:data-ban-nganh-name="${banNganh.tenBan}"
                                                th:data-type="nhan-su"
                                                onclick="showPersonnelModal(this)"
                                                title="Xem danh sách nhân sự">
                                            <span class="staff-count" th:text="${banNganh.soLuongNhanSu}">0</span>
                                            <i class="fas fa-users"></i>
                                        </button>
                                    </td>
                                    <td class="td-chaplain">
                                        <button type="button" class="staff-btn chap-su" 
                                                th:data-ban-nganh-id="${banNganh.id}"
                                                th:data-ban-nganh-name="${banNganh.tenBan}"
                                                th:data-type="chap-su"
                                                onclick="showPersonnelModal(this)"
                                                title="Xem danh sách chấp sự">
                                            <span class="staff-count" th:text="${banNganh.soLuongChapSu}">0</span>
                                            <i class="fas fa-user-graduate"></i>
                                        </button>
                                    </td>
                                    <td class="td-status">
                                        <span th:switch="${banNganh.trangThai.name()}">
                                            <span th:case="'HOAT_DONG'" class="status-badge active">
                                                <i class="fas fa-check-circle"></i> Hoạt động
                                            </span>
                                            <span th:case="'TAM_NGHI'" class="status-badge inactive">
                                                <i class="fas fa-pause-circle"></i> Tạm nghỉ
                                            </span>
                                            <span th:case="'GIAI_TAN'" class="status-badge closed">
                                                <i class="fas fa-times-circle"></i> Giải tán
                                            </span>
                                        </span>
                                    </td>
                                    <td class="td-actions">
                                        <div class="action-buttons">
                                            <a th:href="@{/admin/ban-nganh/view/{id}(id=${banNganh.id})}" 
                                               class="action-btn view-btn" title="Xem chi tiết">
                                                <i class="fas fa-eye"></i>
                                            </a>
                                            <a th:href="@{/admin/ban-nganh/edit/{id}(id=${banNganh.id})}" 
                                               class="action-btn edit-btn" title="Chỉnh sửa">
                                                <i class="fas fa-edit"></i>
                                            </a>
                                            <button type="button" class="action-btn delete-btn" 
                                                    title="Xóa ban ngành"
                                                    th:data-id="${banNganh.id}"
                                                    th:data-name="${banNganh.tenBan}"
                                                    onclick="showDeleteModal(this.dataset.id, this.dataset.name)">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr th:if="${#lists.isEmpty(banNganhPage.content)}" class="empty-row">
                                    <td colspan="8" class="empty-state">
                                        <div class="empty-content">
                                            <div class="empty-icon">
                                                <i class="fas fa-sitemap"></i>
                                            </div>
                                            <h5 class="empty-title">Không có dữ liệu</h5>
                                            <p class="empty-text">Chưa có ban ngành nào được thêm vào hệ thống.</p>
                                            <a th:href="@{/admin/ban-nganh/new}" class="btn-modern btn-modern-primary">
                                                <i class="fas fa-plus me-2"></i>Thêm Ban Ngành Đầu Tiên
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Modern Pagination -->
                <div class="card-footer" th:if="${banNganhPage.totalPages > 1}">
                    <div class="modern-pagination">
                        <a class="pagination-btn prev" 
                           th:href="@{/admin/ban-nganh(page=${banNganhPage.number - 1}, search=${search}, trangThai=${trangThai}, fromDate=${fromDate}, toDate=${toDate})}"
                           th:classappend="${banNganhPage.first} ? 'disabled'">
                            <i class="fas fa-chevron-left"></i>
                            <span>Trước</span>
                        </a>
                        
                        <div class="pagination-numbers">
                            <a class="pagination-number" 
                               th:each="i : ${#numbers.sequence(0, banNganhPage.totalPages - 1)}"
                               th:if="${i >= banNganhPage.number - 2 && i <= banNganhPage.number + 2}"
                               th:href="@{/admin/ban-nganh(page=${i}, search=${search}, trangThai=${trangThai}, fromDate=${fromDate}, toDate=${toDate})}" 
                               th:text="${i + 1}"
                               th:classappend="${i == banNganhPage.number} ? 'active'"></a>
                        </div>
                        
                        <a class="pagination-btn next" 
                           th:href="@{/admin/ban-nganh(page=${banNganhPage.number + 1}, search=${search}, trangThai=${trangThai}, fromDate=${fromDate}, toDate=${toDate})}"
                           th:classappend="${banNganhPage.last} ? 'disabled'">
                            <span>Sau</span>
                            <i class="fas fa-chevron-right"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modern Delete Modal -->
    <div class="modal fade" id="deleteModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content modern-modal">
                <div class="modal-header">
                    <div class="modal-icon warning">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="modal-title-section">
                        <h5 class="modal-title">Xác Nhận Xóa Ban Ngành</h5>
                        <p class="modal-subtitle">Hành động này không thể hoàn tác</p>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="warning-message">
                        <i class="fas fa-info-circle me-2"></i>
                        Các nhân sự trong ban ngành này sẽ được chuyển về trạng thái "Chưa phân công".
                    </div>
                    <p class="confirm-text">
                        Bạn có chắc chắn muốn xóa ban ngành <strong id="deleteName"></strong>?
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-modern btn-modern-outline" data-bs-dismiss="modal">
                        <i class="fas fa-times me-2"></i>Hủy
                    </button>
                    <form id="deleteForm" method="post" class="d-inline">
                        <button type="submit" class="btn-modern btn-modern-danger">
                            <i class="fas fa-trash me-2"></i>Xóa Ban Ngành
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Personnel Modal -->
    <div class="modal fade" id="personnelModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="personnelModalLabel">
                        <i class="fas fa-users me-2"></i>Danh Sách
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="personnelModalBody">
                    <div id="personnelLoading" class="text-center py-4">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Đang tải...</span>
                        </div>
                        <p class="mt-2 text-muted">Đang tải danh sách...</p>
                    </div>
                    <div id="personnelContent" style="display: none;">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <div>
                                <span class="badge bg-primary" id="personnelCount">0</span> <span id="personnelType">người</span>
                            </div>
                            <div class="btn-group btn-group-sm" role="group">
                                <button type="button" class="btn btn-outline-secondary active" id="listViewBtn" onclick="toggleView('list')">
                                    <i class="fas fa-list"></i> Danh sách
                                </button>
                                <button type="button" class="btn btn-outline-secondary" id="gridViewBtn" onclick="toggleView('grid')">
                                    <i class="fas fa-th"></i> Lưới
                                </button>
                            </div>
                        </div>
                        <!-- List View -->
                        <div id="listView">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead class="table-light">
                                        <tr>
                                            <th>Họ Tên</th>
                                            <th>Chức Vụ</th>
                                            <th>Liên Hệ</th>
                                            <th>Điểm Nhóm</th>
                                            <th>Trạng Thái</th>
                                        </tr>
                                    </thead>
                                    <tbody id="personnelTableBody"></tbody>
                                </table>
                            </div>
                        </div>
                        <!-- Grid View -->
                        <div id="gridView" style="display: none;">
                            <div class="row" id="personnelGridContainer"></div>
                        </div>
                        <!-- Empty State -->
                        <div id="emptyState" class="text-center py-4" style="display: none;">
                            <i class="fas fa-user-slash fa-3x text-muted mb-3"></i>
                            <h6 class="text-muted" id="emptyStateMessage">Chưa có dữ liệu</h6>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <div th:replace="~{fragments/admin-layout :: scripts}"></div>
    <script>
        function showDeleteModal(id, name) {
            const deleteNameElement = document.getElementById('deleteName');
            const deleteFormElement = document.getElementById('deleteForm');
            const deleteModalElement = document.getElementById('deleteModal');
            
            if (deleteNameElement) {
                deleteNameElement.textContent = name;
            }
            
            if (deleteFormElement) {
                deleteFormElement.action = '/admin/ban-nganh/delete/' + id;
            }
            
            if (deleteModalElement) {
                try {
                    if (typeof bootstrap !== 'undefined') {
                        new bootstrap.Modal(deleteModalElement).show();
                    } else {
                        if (confirm('Bạn có chắc chắn muốn xóa ban ngành "' + name + '"?')) {
                            const form = document.createElement('form');
                            form.method = 'POST';
                            form.action = '/admin/ban-nganh/delete/' + id;
                            document.body.appendChild(form);
                            form.submit();
                        }
                    }
                } catch (error) {
                    console.error('Modal error:', error);
                }
            }
        }

        function clearAdvancedFilters() {
            document.querySelector('select[name="trangThai"]').value = '';
            document.querySelector('input[name="fromDate"]').value = '';
            document.querySelector('input[name="toDate"]').value = '';
        }
        
        function clearSearchInput() {
            const searchInput = document.getElementById('searchInput');
            const clearBtn = document.querySelector('.clear-input-btn');
            
            searchInput.value = '';
            clearBtn.style.display = 'none';
            searchInput.focus();
        }
        
        // Show/hide clear button based on input content
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('searchInput');
            const clearBtn = document.querySelector('.clear-input-btn');
            
            if (searchInput && clearBtn) {
                searchInput.addEventListener('input', function() {
                    if (this.value.length > 0) {
                        clearBtn.style.display = 'block';
                    } else {
                        clearBtn.style.display = 'none';
                    }
                });
            }
        });

        function showPersonnelModal(button) {
            const banNganhId = button.dataset.banNganhId;
            const banNganhName = button.dataset.banNganhName;
            const type = button.dataset.type || 'nhan-su';
            
            const title = type === 'chap-su' ? 'Danh sách chấp sự' : 'Danh sách nhân sự';
            const icon = type === 'chap-su' ? 'fa-user-graduate' : 'fa-users';
            const typeText = type === 'chap-su' ? 'chấp sự' : 'nhân sự';
            
            document.getElementById('personnelModalLabel').innerHTML = `<i class="fas ${icon} me-2"></i>${title} - ${banNganhName}`;
            document.getElementById('personnelType').textContent = typeText;
            
            document.getElementById('personnelLoading').style.display = 'block';
            document.getElementById('personnelContent').style.display = 'none';
            
            const modal = new bootstrap.Modal(document.getElementById('personnelModal'));
            modal.show();
            
            fetch(`/admin/api/ban-nganh/${banNganhId}/${type}`)
                .then(response => response.json())
                .then(data => {
                    document.getElementById('personnelLoading').style.display = 'none';
                    document.getElementById('personnelContent').style.display = 'block';
                    
                    if (data.length === 0) {
                        document.getElementById('emptyState').style.display = 'block';
                        document.getElementById('emptyStateMessage').textContent = `Chưa có ${typeText} nào trong ban ngành này`;
                        document.getElementById('listView').style.display = 'none';
                        document.getElementById('gridView').style.display = 'none';
                    } else {
                        document.getElementById('emptyState').style.display = 'none';
                        document.getElementById('personnelCount').textContent = data.length;
                        renderPersonnelList(data, type);
                        renderPersonnelGrid(data, type);
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    document.getElementById('personnelLoading').style.display = 'none';
                    document.getElementById('personnelContent').innerHTML = 
                        `<div class="alert alert-danger"><i class="fas fa-exclamation-triangle me-2"></i>Có lỗi xảy ra khi tải danh sách ${typeText}</div>`;
                });
        }

        function renderPersonnelList(personnelList, type) {
            const tbody = document.getElementById('personnelTableBody');
            tbody.innerHTML = '';
            const iconClass = type === 'chap-su' ? 'fa-user-graduate' : 'fa-user';
            const badgeClass = type === 'chap-su' ? 'bg-warning' : 'bg-primary';
            
            personnelList.forEach(person => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <div class="d-flex align-items-center">
                            <div class="avatar-sm ${badgeClass} text-white rounded-circle d-flex align-items-center justify-content-center me-3">
                                ${person.avatarUrl ? 
                                    `<img src="${person.avatarUrl}" class="rounded-circle" width="40" height="40" alt="Avatar">` :
                                    `<i class="fas ${iconClass}"></i>`
                                }
                            </div>
                            <div>
                                <h6 class="mb-0">${person.hoTen}</h6>
                                <small class="text-muted">ID: ${person.id}</small>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span class="badge bg-secondary">${person.chucVu || 'Chưa có'}</span>
                    </td>
                    <td>
                        <div>
                            ${person.email ? `<small class="d-block"><i class="fas fa-envelope text-primary me-1"></i>${person.email}</small>` : ''}
                            ${person.dienThoai ? `<small class="d-block"><i class="fas fa-phone text-success me-1"></i>${person.dienThoai}</small>` : ''}
                            ${!person.email && !person.dienThoai ? '<span class="text-muted">Chưa có</span>' : ''}
                        </div>
                    </td>
                    <td>
                        <span class="badge bg-info">${person.diemNhomTen || 'Chưa có'}</span>
                    </td>
                    <td>
                        <span class="badge ${getTrangThaiClass(person.trangThai)}">
                            ${getTrangThaiText(person.trangThai)}
                        </span>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function renderPersonnelGrid(personnelList, type) {
            const container = document.getElementById('personnelGridContainer');
            container.innerHTML = '';
            const iconClass = type === 'chap-su' ? 'fa-user-graduate' : 'fa-user';
            const badgeClass = type === 'chap-su' ? 'bg-warning' : 'bg-primary';
            
            personnelList.forEach(person => {
                const col = document.createElement('div');
                col.className = 'col-md-6 col-lg-4 mb-3';
                col.innerHTML = `
                    <div class="card h-100">
                        <div class="card-body text-center">
                            <div class="avatar-lg ${badgeClass} text-white rounded-circle d-flex align-items-center justify-content-center mx-auto mb-3">
                                ${person.avatarUrl ? 
                                    `<img src="${person.avatarUrl}" class="rounded-circle" width="60" height="60" alt="Avatar">` :
                                    `<i class="fas ${iconClass} fa-2x"></i>`
                                }
                            </div>
                            <h6 class="mb-1">${person.hoTen}</h6>
                            <p class="text-muted small mb-2">${person.chucVu || 'Chưa có chức vụ'}</p>
                            <div class="mb-2">
                                ${person.email ? `<small class="d-block text-muted"><i class="fas fa-envelope me-1"></i>${person.email}</small>` : ''}
                                ${person.dienThoai ? `<small class="d-block text-muted"><i class="fas fa-phone me-1"></i>${person.dienThoai}</small>` : ''}
                            </div>
                            <div class="d-flex justify-content-center gap-1">
                                <span class="badge bg-info small">${person.diemNhomTen || 'Chưa có'}</span>
                                <span class="badge ${getTrangThaiClass(person.trangThai)} small">
                                    ${getTrangThaiText(person.trangThai)}
                                </span>
                            </div>
                        </div>
                    </div>
                `;
                container.appendChild(col);
            });
        }

        function toggleView(viewType) {
            const listView = document.getElementById('listView');
            const gridView = document.getElementById('gridView');
            const listBtn = document.getElementById('listViewBtn');
            const gridBtn = document.getElementById('gridViewBtn');
            
            if (viewType === 'list') {
                listView.style.display = 'block';
                gridView.style.display = 'none';
                listBtn.classList.add('active');
                gridBtn.classList.remove('active');
            } else {
                listView.style.display = 'none';
                gridView.style.display = 'block';
                listBtn.classList.remove('active');
                gridBtn.classList.add('active');
            }
        }

        function getTrangThaiClass(trangThai) {
            switch(trangThai) {
                case 'HOAT_DONG': return 'bg-success';
                case 'TAM_NGHI': return 'bg-warning';
                case 'GIAI_TAN':
                case 'NGHI_VIEC': return 'bg-danger';
                default: return 'bg-secondary';
            }
        }

        function getTrangThaiText(trangThai) {
            switch(trangThai) {
                case 'HOAT_DONG': return 'Hoạt động';
                case 'TAM_NGHI': return 'Tạm nghỉ';
                case 'GIAI_TAN': return 'Giải tán';
                case 'NGHI_VIEC': return 'Nghỉ việc';
                default: return 'Không xác định';
            }
        }
    </script>

    <style>
        .avatar-sm {
            width: 40px;
            height: 40px;
            font-size: 16px;
        }
        
        .avatar-lg {
            width: 80px;
            height: 80px;
            font-size: 24px;
        }
        
        .table th {
            font-weight: 600;
            color: #495057;
            border-bottom: 2px solid #dee2e6;
        }
        
        .btn-group .btn {
            border-radius: 4px !important;
            margin-right: 2px;
        }
        
        .btn-group .btn:last-child {
            margin-right: 0;
        }
        
        .modal-lg {
            max-width: 900px;
        }
        
        .card {
            transition: transform 0.2s;
        }
        
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        #personnelModal .table td {
            vertical-align: middle;
        }
        
        .btn-sm.btn-info {
            background-color: #17a2b8;
            border-color: #17a2b8;
            color: white;
        }
        
        .btn-sm.btn-info:hover {
            background-color: #138496;
            border-color: #117a8b;
            transform: translateY(-1px);
        }

        .btn-sm.btn-warning {
            background-color: #ffc107;
            border-color: #ffc107;
            color: #212529;
        }
        
        .btn-sm.btn-warning:hover {
            background-color: #e0a800;
            border-color: #d39e00;
            transform: translateY(-1px);
        }
      /* Modern Admin Page Styles */
      .modern-admin-page {
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        min-height: 100vh;
      }

      /* Modern Page Header */
      .modern-page-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 20px;
        padding: 2rem;
        margin-bottom: 2rem;
        color: white;
        box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
      }

      .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .header-info {
        display: flex;
        align-items: center;
        gap: 1.5rem;
      }

      .header-icon {
        width: 70px;
        height: 70px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
      }

      .header-title {
        font-size: 2.5rem;
        font-weight: 700;
        margin: 0;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .header-subtitle {
        font-size: 1.1rem;
        opacity: 0.9;
        margin: 0.5rem 0 0 0;
      }

      .header-actions {
        display: flex;
        gap: 1rem;
      }

      /* Modern Buttons */
      .btn-modern {
        padding: 0.75rem 1.5rem;
        border-radius: 12px;
        font-weight: 600;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        border: none;
        cursor: pointer;
      }

      .btn-modern-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
      }

      .btn-modern-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        color: white;
        text-decoration: none;
      }

      .btn-modern-outline {
        background: rgba(255, 255, 255, 0.2);
        color: white;
        border: 2px solid rgba(255, 255, 255, 0.3);
      }

      .btn-modern-outline:hover {
        background: rgba(255, 255, 255, 0.3);
        color: white;
        text-decoration: none;
      }

      .btn-modern-success {
        background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        color: white;
      }

      .btn-modern-warning {
        background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);
        color: white;
      }

      /* Modern Cards */
      .modern-card {
        background: white;
        border-radius: 16px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        margin-bottom: 2rem;
        overflow: hidden;
      }

      .card-header {
        padding: 1.5rem;
        background: #f8f9fa;
        border-bottom: 1px solid #e9ecef;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .header-left {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .card-icon {
        width: 45px;
        height: 45px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1.2rem;
      }

      .card-title h5 {
        margin: 0;
        font-weight: 600;
        color: #2d3748;
      }

      .card-title p {
        margin: 0.25rem 0 0 0;
        color: #718096;
        font-size: 0.9rem;
      }

      .count-badge {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 0.25rem 0.75rem;
        border-radius: 20px;
        font-weight: 600;
        font-size: 0.85rem;
      }

      .btn-toggle {
        background: #e2e8f0;
        border: none;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        color: #4a5568;
        font-weight: 500;
        transition: all 0.3s ease;
      }

      .btn-toggle:hover {
        background: #cbd5e0;
      }

      .card-content {
        padding: 1.5rem;
      }

      /* Search Styles */
      .search-row {
        display: flex;
        gap: 1rem;
        align-items: end;
      }

      .search-input-group {
        flex: 1;
        position: relative;
      }

      .input-icon {
        position: absolute;
        left: 1rem;
        top: 50%;
        transform: translateY(-50%);
        color: #a0aec0;
        z-index: 10;
      }

      .form-input {
        width: 100%;
        padding: 0.875rem 3rem 0.875rem 3rem;
        border: 2px solid #e2e8f0;
        border-radius: 12px;
        font-size: 1rem;
        transition: all 0.3s ease;
      }

      .form-input:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      }

      .clear-input-btn {
        position: absolute;
        right: 1rem;
        top: 50%;
        transform: translateY(-50%);
        background: #e2e8f0;
        border: none;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        display: none;
        align-items: center;
        justify-content: center;
        color: #718096;
        cursor: pointer;
        transition: all 0.3s ease;
        z-index: 10;
      }

      .clear-input-btn:hover {
        background: #cbd5e1;
        color: #4a5568;
      }

      /* Active Filters */
      .active-filters {
        margin-top: 1rem;
        padding: 1rem;
        background: #f7fafc;
        border-radius: 8px;
        border-left: 4px solid #667eea;
      }

      .filters-label {
        font-weight: 600;
        color: #4a5568;
        margin-bottom: 0.75rem;
        display: flex;
        align-items: center;
      }

      .filter-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
      }

      .filter-tag {
        background: white;
        border: 2px solid #e2e8f0;
        border-radius: 20px;
        padding: 0.375rem 0.75rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.875rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      }

      .filter-tag-label {
        color: #718096;
        font-weight: 500;
      }

      .filter-tag-value {
        color: #2d3748;
        font-weight: 600;
      }

      .filter-tag-remove {
        background: #fed7d7;
        color: #c53030;
        width: 18px;
        height: 18px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        text-decoration: none;
        font-size: 0.75rem;
        transition: all 0.3s ease;
      }

      .filter-tag-remove:hover {
        background: #fc8181;
        color: white;
        text-decoration: none;
      }

      .search-actions {
        display: flex;
        gap: 0.75rem;
      }

      .advanced-filters {
        margin-top: 1.5rem;
        padding-top: 1.5rem;
        border-top: 1px solid #e2e8f0;
      }

      .filter-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1rem;
        margin-bottom: 1.5rem;
      }

      .filter-item {
        display: flex;
        flex-direction: column;
      }

      .filter-label {
        font-weight: 600;
        color: #4a5568;
        margin-bottom: 0.5rem;
      }

      .form-select-modern {
        padding: 0.875rem 1rem;
        border: 2px solid #e2e8f0;
        border-radius: 12px;
        font-size: 1rem;
        transition: all 0.3s ease;
      }

      .form-select-modern:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      }

      .filter-actions {
        display: flex;
        gap: 1rem;
      }

      /* Modern Table */
      .table-container {
        overflow-x: auto;
      }

      .modern-table {
        width: 100%;
        border-collapse: collapse;
      }

      .modern-table th {
        background: #f7fafc;
        padding: 1rem;
        text-align: left;
        font-weight: 600;
        color: #4a5568;
        border-bottom: 2px solid #e2e8f0;
        white-space: nowrap;
      }

      .modern-table td {
        padding: 1rem;
        border-bottom: 1px solid #e2e8f0;
        vertical-align: middle;
      }

      .table-row:hover {
        background: #f7fafc;
      }

      /* Table Cell Styles */
      .id-badge {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 0.375rem 0.75rem;
        border-radius: 8px;
        font-weight: 600;
        font-size: 0.875rem;
      }

      .user-info {
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }

      .user-avatar {
        width: 45px;
        height: 45px;
        border-radius: 50%;
        overflow: hidden;
        border: 2px solid #e2e8f0;
      }

      .avatar-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .user-name {
        font-weight: 600;
        color: #2d3748;
        margin-bottom: 0.25rem;
      }

      .user-job {
        color: #718096;
        font-size: 0.875rem;
      }

      .birth-year {
        font-weight: 500;
        color: #4a5568;
      }

      .gender-badge {
        padding: 0.375rem 0.75rem;
        border-radius: 20px;
        font-size: 0.875rem;
        font-weight: 500;
        display: inline-flex;
        align-items: center;
        gap: 0.375rem;
      }

      .gender-badge.male {
        background: linear-gradient(135deg, #3182ce 0%, #2b77cb 100%);
        color: white;
      }

      .gender-badge.female {
        background: linear-gradient(135deg, #e53e3e 0%, #d53f8c 100%);
        color: white;
      }

      .phone-number {
        font-family: "Courier New", monospace;
        font-weight: 500;
        color: #4a5568;
      }

      .status-badge {
        padding: 0.375rem 0.75rem;
        border-radius: 20px;
        font-size: 0.875rem;
        font-weight: 500;
        display: inline-flex;
        align-items: center;
        gap: 0.375rem;
      }

      .status-badge.active {
        background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        color: white;
      }

      .status-badge.inactive {
        background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);
        color: white;
      }

      .status-badge.moved {
        background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
        color: white;
      }

      .date-info {
        text-align: center;
      }

      .date-main {
        font-weight: 500;
        color: #4a5568;
      }

      .date-time {
        color: #718096;
        font-size: 0.875rem;
      }

      .no-data {
        color: #a0aec0;
        font-style: italic;
      }

      /* Action Buttons */
      .action-buttons {
        display: flex;
        gap: 0.5rem;
      }

      .action-btn {
        width: 35px;
        height: 35px;
        border-radius: 8px;
        border: none;
        display: flex;
        align-items: center;
        justify-content: center;
        text-decoration: none;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .view-btn {
        background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);
        color: white;
      }

      .edit-btn {
        background: linear-gradient(135deg, #ffc107 0%, #e0a800 100%);
        color: white;
      }

      .delete-btn {
        background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
        color: white;
      }

      .action-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        color: white;
        text-decoration: none;
      }

      /* Empty State */
      .empty-state {
        padding: 4rem 2rem;
        text-align: center;
      }

      .empty-content {
        max-width: 400px;
        margin: 0 auto;
      }

      .empty-icon {
        font-size: 4rem;
        color: #cbd5e0;
        margin-bottom: 1.5rem;
      }

      .empty-title {
        color: #4a5568;
        margin-bottom: 1rem;
      }

      .empty-text {
        color: #718096;
        margin-bottom: 2rem;
      }

      /* Modern Pagination */
      .modern-pagination {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 0.5rem;
        padding: 1.5rem;
      }

      .pagination-btn {
        padding: 0.75rem 1rem;
        border-radius: 8px;
        background: white;
        border: 2px solid #e2e8f0;
        color: #4a5568;
        text-decoration: none;
        font-weight: 500;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .pagination-btn:hover:not(.disabled) {
        background: #667eea;
        border-color: #667eea;
        color: white;
        text-decoration: none;
      }

      .pagination-btn.disabled {
        opacity: 0.5;
        cursor: not-allowed;
        pointer-events: none;
      }

      .pagination-numbers {
        display: flex;
        gap: 0.25rem;
      }

      .pagination-number {
        width: 40px;
        height: 40px;
        border-radius: 8px;
        background: white;
        border: 2px solid #e2e8f0;
        color: #4a5568;
        text-decoration: none;
        font-weight: 500;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
      }

      .pagination-number:hover {
        background: #667eea;
        border-color: #667eea;
        color: white;
        text-decoration: none;
      }

      .pagination-number.active {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-color: transparent;
        color: white;
      }

      /* Modern Modal */
      .modern-modal {
        border: none;
        border-radius: 16px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
      }

      .modern-modal .modal-header {
        padding: 2rem 2rem 1rem 2rem;
        border-bottom: none;
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .modal-icon {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
      }

      .modal-icon.warning {
        background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);
        color: white;
      }

      .modal-title-section h5 {
        margin: 0;
        font-weight: 600;
        color: #2d3748;
      }

      .modal-subtitle {
        margin: 0.25rem 0 0 0;
        color: #718096;
        font-size: 0.9rem;
      }

      .modern-modal .modal-body {
        padding: 1rem 2rem;
      }

      .warning-message {
        background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
        padding: 1rem;
        border-radius: 8px;
        margin-bottom: 1rem;
        color: #2c5282;
      }

      .confirm-text {
        color: #4a5568;
        margin: 0;
      }

      .modern-modal .modal-footer {
        padding: 1rem 2rem 2rem 2rem;
        border-top: none;
        display: flex;
        gap: 1rem;
        justify-content: flex-end;
      }

      /* Enhanced Table Cell Styles */
      .name-info {
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }

      .name-icon {
        width: 40px;
        height: 40px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1rem;
        flex-shrink: 0;
      }

      .name-details {
        flex: 1;
      }

      .name-title {
        font-weight: 600;
        color: #2d3748;
        margin-bottom: 0.25rem;
        font-size: 1rem;
      }

      .name-desc {
        color: #718096;
        font-size: 0.875rem;
      }

      .code-badge {
        background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);
        color: white;
        padding: 0.375rem 0.75rem;
        border-radius: 15px;
        font-weight: 600;
        font-size: 0.875rem;
        font-family: 'Courier New', monospace;
      }

      /* Manager Column Styles */
      .manager-info {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }

      .manager-item {
        background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
        border-radius: 8px;
        padding: 0.75rem;
        border-left: 3px solid #667eea;
      }

      .manager-role {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 0.5rem;
        font-weight: 600;
        color: #4a5568;
        font-size: 0.875rem;
      }

      .manager-role i {
        color: #667eea;
        font-size: 0.875rem;
      }

      .manager-name {
        font-weight: 500;
        color: #2d3748;
        margin-bottom: 0.25rem;
      }

      .manager-type {
        font-size: 0.75rem;
        color: #718096;
        font-style: italic;
      }

      /* Contact Column Styles */
      .contact-info {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .contact-item {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.875rem;
        color: #4a5568;
      }

      .contact-item i {
        color: #667eea;
        width: 16px;
        text-align: center;
      }

      /* Staff Button Styles */
      .staff-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        padding: 0.75rem 1rem;
        border: none;
        border-radius: 12px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        min-width: 80px;
        position: relative;
        overflow: hidden;
      }

      .staff-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        transition: left 0.5s;
      }

      .staff-btn:hover::before {
        left: 100%;
      }

      .staff-btn.nhan-su {
        background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%);
        color: white;
        box-shadow: 0 4px 15px rgba(66, 153, 225, 0.3);
      }

      .staff-btn.nhan-su:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(66, 153, 225, 0.4);
      }

      .staff-btn.chap-su {
        background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
        color: white;
        box-shadow: 0 4px 15px rgba(72, 187, 120, 0.3);
      }

      .staff-btn.chap-su:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(72, 187, 120, 0.4);
      }

      .staff-count {
        font-size: 1.1rem;
        font-weight: 700;
      }

      .staff-btn i {
        font-size: 1rem;
      }

      /* Status Badge Enhanced */
      .status-badge.closed {
        background: linear-gradient(135deg, #e53e3e 0%, #c53030 100%);
        color: white;
      }

      /* Date Input Styles */
      input[type="date"] {
        padding: 0.875rem 1rem;
        border: 2px solid #e2e8f0;
        border-radius: 12px;
        font-size: 1rem;
        transition: all 0.3s ease;
        background: white;
        color: #4a5568;
        font-family: inherit;
      }

      input[type="date"]:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        transform: translateY(-1px);
      }

      input[type="date"]:hover {
        border-color: #cbd5e0;
      }

      /* Date input webkit styles */
      input[type="date"]::-webkit-calendar-picker-indicator {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 4px;
        cursor: pointer;
        padding: 4px;
        margin-left: 8px;
      }

      input[type="date"]::-webkit-calendar-picker-indicator:hover {
        background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
      }

      /* No data styling */
      .no-data {
        color: #a0aec0;
        font-style: italic;
        font-size: 0.875rem;
      }

      /* Enhanced table hover effects */
      .table-row:hover .name-icon {
        transform: scale(1.1);
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
      }

      .table-row:hover .staff-btn {
        transform: translateY(-1px);
      }

      .table-row:hover .manager-item {
        background: linear-gradient(135deg, #e6f3ff 0%, #bee3f8 100%);
        border-left-color: #4299e1;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .header-content {
          flex-direction: column;
          text-align: center;
          gap: 1.5rem;
        }

        .header-title {
          font-size: 2rem;
        }

        .search-row {
          flex-direction: column;
        }

        .filter-grid {
          grid-template-columns: 1fr;
        }

        .filter-actions {
          flex-direction: column;
        }

        .modern-pagination {
          flex-wrap: wrap;
        }

        .name-info {
          flex-direction: column;
          text-align: center;
          gap: 0.5rem;
        }

        .manager-info {
          gap: 0.5rem;
        }

        .staff-btn {
          min-width: 60px;
          padding: 0.5rem 0.75rem;
        }
      }
    </style>
</body>
</html>