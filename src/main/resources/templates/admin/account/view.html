<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
  <head th:replace="~{fragments/admin-layout :: head}"></head>
  
  <body class="modern-admin-page">
    <!-- Sidebar -->
    <nav th:replace="~{fragments/admin-layout :: sidebar}"></nav>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Top Navigation -->
      <nav th:replace="~{fragments/admin-layout :: topnav}"></nav>

      <!-- Content -->
      <div class="container-fluid py-4">
        <!-- Flash Messages -->
        <div th:replace="~{fragments/admin-layout :: messages}"></div>

        <!-- Modern Page Header -->
        <div class="modern-page-header">
          <div class="header-content">
            <div class="header-info">
              <div class="header-icon">
                <i class="fas fa-user-shield"></i>
              </div>
              <div class="header-text">
                <h1 class="header-title">Chi Tiết Tài Khoản</h1>
                <p class="header-subtitle">Thông tin chi tiết của tài khoản</p>
              </div>
            </div>
            <div class="header-actions">
              <a th:href="@{/admin/account/edit/{id}(id=${account.id})}" class="btn-modern btn-modern-primary">
                <i class="fas fa-edit me-2"></i>Chỉnh Sửa
              </a>
              <a th:href="@{/admin/account}" class="btn-modern btn-modern-outline">
                <i class="fas fa-arrow-left me-2"></i>Quay Lại
              </a>
            </div>
          </div>
        </div>

        <div class="view-grid-container">
          <!-- Main Content -->
          <div class="view-main-content">
            <!-- Account Profile -->
            <div class="modern-card">
              <div class="card-header">
                <div class="header-left">
                  <div class="card-icon">
                    <i class="fas fa-user-circle"></i>
                  </div>
                  <div class="card-title">
                    <h5>Thông Tin Tài Khoản</h5>
                    <p>Chi tiết thông tin đăng nhập và hồ sơ</p>
                  </div>
                </div>
              </div>
              <div class="card-content">
                <!-- Account Profile Section -->
                <div class="account-profile">
                  <div class="profile-avatar">
                    <i class="fas fa-user-circle"></i>
                  </div>
                  <div class="profile-info">
                    <h3 class="profile-name" th:text="${account.fullName}">Quản trị viên hệ thống</h3>
                    <div class="profile-meta">
                      <div class="meta-item">
                        <i class="fas fa-user"></i>
                        <span th:text="${account.username}">admin</span>
                      </div>
                      <div class="meta-item">
                        <i class="fas fa-envelope"></i>
                        <span th:text="${account.email}">admin@example.com</span>
                      </div>
                    </div>
                  </div>
                  <div class="profile-badges">
                    <span class="role-badge" 
                          th:classappend="${account.role.name() == 'ADMIN'} ? 'admin' : 'user'">
                      <i th:class="${account.role.name() == 'ADMIN'} ? 'fas fa-crown' : 'fas fa-user'"></i>
                      <span th:text="${account.role.name() == 'ADMIN'} ? 'Quản Trị Viên' : 'Hội Viên'">Quản Trị Viên</span>
                    </span>
                    <span class="status-badge" 
                          th:classappend="${account.status.name() == 'ACTIVE'} ? 'active' : 'inactive'">
                      <i th:class="${account.status.name() == 'ACTIVE'} ? 'fas fa-check-circle' : 'fas fa-pause-circle'"></i>
                      <span th:text="${account.status.name() == 'ACTIVE'} ? 'Hoạt Động' : 'Tạm Khóa'">Hoạt Động</span>
                    </span>
                  </div>
                </div>

                <!-- Linked Profile Section -->
                <div class="linked-profile-section">
                  <div class="section-header">
                    <i class="fas fa-link"></i>
                    <h4>Hồ Sơ Liên Kết</h4>
                  </div>
                  
                  <!-- Nhân Sự -->
                  <div th:if="${account.nhanSu != null}" class="linked-profile nhan-su">
                    <div class="profile-type-badge">
                      <i class="fas fa-user"></i>
                      <span>Nhân Sự</span>
                    </div>
                    <div class="linked-profile-content">
                      <div class="linked-avatar">
                        <img th:src="${account.nhanSu.avatarUrl} ?: '/static/images/default-avatar.svg'" 
                             alt="Avatar">
                      </div>
                      <div class="linked-info">
                        <h5 th:text="${account.nhanSu.hoTen}">Tên nhân sự</h5>
                        <div class="linked-details">
                          <span th:if="${account.nhanSu.chucVu != null}" 
                                th:text="${account.nhanSu.chucVu.displayName}">Chức vụ</span>
                          <span th:if="${account.nhanSu.banNganh != null}" 
                                th:text="' - ' + ${account.nhanSu.banNganh.tenBan}">Ban ngành</span>
                        </div>
                      </div>
                      <div class="linked-actions">
                        <a th:href="@{/admin/nhan-su/{id}(id=${account.nhanSu.id})}" 
                           class="view-profile-btn">
                          <i class="fas fa-eye"></i>
                          <span>Xem hồ sơ</span>
                        </a>
                      </div>
                    </div>
                  </div>
                  
                  <!-- Chấp Sự -->
                  <div th:if="${account.chapSu != null}" class="linked-profile chap-su">
                    <div class="profile-type-badge">
                      <i class="fas fa-user-tie"></i>
                      <span>Chấp Sự</span>
                    </div>
                    <div class="linked-profile-content">
                      <div class="linked-avatar">
                        <img th:src="${account.chapSu.avatarUrl} ?: '/static/images/default-avatar.svg'" 
                             alt="Avatar">
                      </div>
                      <div class="linked-info">
                        <h5 th:text="${account.chapSu.hoTen}">Tên chấp sự</h5>
                        <div class="linked-details">
                          <span th:if="${account.chapSu.chucVu != null}" 
                                th:text="${account.chapSu.chucVu.displayName}">Chức vụ</span>
                        </div>
                      </div>
                      <div class="linked-actions">
                        <a th:href="@{/admin/chap-su/{id}(id=${account.chapSu.id})}" 
                           class="view-profile-btn">
                          <i class="fas fa-eye"></i>
                          <span>Xem hồ sơ</span>
                        </a>
                      </div>
                    </div>
                  </div>
                  
                  <!-- No Profile Linked -->
                  <div th:if="${account.nhanSu == null && account.chapSu == null}" class="no-profile">
                    <div class="no-profile-icon">
                      <i class="fas fa-unlink"></i>
                    </div>
                    <p>Chưa liên kết với hồ sơ nào</p>
                  </div>
                </div>

                <!-- Password Section -->
                <div th:if="${account.firstPassword != null}" class="password-section">
                  <div class="section-header">
                    <i class="fas fa-key"></i>
                    <h4>Mật Khẩu Ban Đầu</h4>
                  </div>
                  <div class="password-container">
                    <div class="password-field">
                      <input type="password" class="password-input" 
                             th:value="${account.firstPassword}" 
                             id="firstPasswordField" readonly>
                      <button type="button" class="password-toggle" 
                              onclick="togglePasswordVisibility('firstPasswordField', 'firstPasswordIcon')">
                        <i class="fas fa-eye" id="firstPasswordIcon"></i>
                      </button>
                      <button type="button" class="password-copy" 
                              th:data-password="${account.firstPassword}"
                              onclick="copyToClipboard(this.dataset.password)" 
                              title="Sao chép mật khẩu">
                        <i class="fas fa-copy"></i>
                      </button>
                    </div>
                    <div class="password-warning">
                      <i class="fas fa-exclamation-triangle"></i>
                      <span>Đây là mật khẩu được tạo tự động khi tạo tài khoản. Vui lòng lưu trữ an toàn.</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Sidebar -->
          <div class="view-sidebar">
            <!-- Activity Info -->
            <div class="modern-card">
              <div class="card-header">
                <div class="header-left">
                  <div class="card-icon">
                    <i class="fas fa-clock"></i>
                  </div>
                  <div class="card-title">
                    <h5>Hoạt Động</h5>
                    <p>Thông tin hoạt động tài khoản</p>
                  </div>
                </div>
              </div>
              <div class="card-content">
                <div class="activity-info">
                  <div class="activity-item">
                    <div class="activity-icon success">
                      <i class="fas fa-calendar-plus"></i>
                    </div>
                    <div class="activity-details">
                      <div class="activity-label">Ngày tạo</div>
                      <div class="activity-value" th:text="${#temporals.format(account.createdAt, 'dd/MM/yyyy HH:mm')}">01/01/2024 10:00</div>
                    </div>
                  </div>

                  <div class="activity-item">
                    <div class="activity-icon primary">
                      <i class="fas fa-calendar-edit"></i>
                    </div>
                    <div class="activity-details">
                      <div class="activity-label">Cập nhật cuối</div>
                      <div class="activity-value" th:text="${#temporals.format(account.updatedAt, 'dd/MM/yyyy HH:mm')}">01/01/2024 10:00</div>
                    </div>
                  </div>

                  <div class="activity-item">
                    <div class="activity-icon info">
                      <i class="fas fa-sign-in-alt"></i>
                    </div>
                    <div class="activity-details">
                      <div class="activity-label">Đăng nhập cuối</div>
                      <div class="activity-value" th:if="${account.lastLogin}" 
                           th:text="${#temporals.format(account.lastLogin, 'dd/MM/yyyy HH:mm')}">01/01/2024 10:00</div>
                      <div class="activity-value no-data" th:unless="${account.lastLogin}">Chưa đăng nhập</div>
                    </div>
                  </div>

                  <div class="activity-item">
                    <div class="activity-icon" th:classappend="${account.loginAttempts > 0} ? 'warning' : 'success'">
                      <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="activity-details">
                      <div class="activity-label">Số lần đăng nhập sai</div>
                      <div class="activity-value">
                        <span th:text="${account.loginAttempts}">0</span> lần
                      </div>
                    </div>
                  </div>

                  <div th:if="${account.lockedUntil}" class="activity-item">
                    <div class="activity-icon danger">
                      <i class="fas fa-lock"></i>
                    </div>
                    <div class="activity-details">
                      <div class="activity-label">Khóa đến</div>
                      <div class="activity-value" th:text="${#temporals.format(account.lockedUntil, 'dd/MM/yyyy HH:mm')}">01/01/2024 10:00</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Quick Actions - New Design -->
            <div class="modern-card">
              <div class="card-header">
                <div class="header-left">
                  <div class="card-icon">
                    <i class="fas fa-cogs"></i>
                  </div>
                  <div class="card-title">
                    <h5>Thao Tác Nhanh</h5>
                    <p>Các hành động quản lý tài khoản</p>
                  </div>
                </div>
              </div>
              <div class="card-content">
                <div class="quick-actions-grid">
                  <!-- Toggle Status -->
                  <div class="quick-action-item warning"
                       th:data-id="${account.id}"
                       th:data-name="${account.fullName}"
                       onclick="toggleStatus(this.dataset.id, this.dataset.name)">
                    <div class="quick-action-icon">
                      <i class="fas fa-power-off"></i>
                    </div>
                    <div class="quick-action-content">
                      <h6>Đổi Trạng Thái</h6>
                      <p>Kích hoạt/tạm khóa</p>
                    </div>
                  </div>

                  <!-- Reset Password -->
                  <div class="quick-action-item info"
                       th:data-id="${account.id}"
                       th:data-name="${account.fullName}"
                       onclick="resetPassword(this.dataset.id, this.dataset.name)">
                    <div class="quick-action-icon">
                      <i class="fas fa-key"></i>
                    </div>
                    <div class="quick-action-content">
                      <h6>Reset Mật Khẩu</h6>
                      <p>Tạo mật khẩu mới</p>
                    </div>
                  </div>

                  <!-- Delete Account -->
                  <div class="quick-action-item danger"
                       th:data-id="${account.id}"
                       th:data-name="${account.fullName}"
                       onclick="deleteAccount(this.dataset.id, this.dataset.name)">
                    <div class="quick-action-icon">
                      <i class="fas fa-trash-alt"></i>
                    </div>
                    <div class="quick-action-content">
                      <h6>Xóa Tài Khoản</h6>
                      <p>Xóa vĩnh viễn</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Include modals from list page -->
    <div th:replace="~{admin/account/list :: #resetPasswordModal}"></div>
    <div th:replace="~{admin/account/list :: #deleteModal}"></div>
    <div th:replace="~{admin/account/list :: #toggleStatusModal}"></div>
    <div th:replace="~{fragments/admin-layout :: scripts}"></div>

    <style>
  /* Modern Admin Page Styles */
  .modern-admin-page {
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%) !important;
    min-height: 100vh;
  }

  /* Modern Page Header */
  .modern-page-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 20px;
    padding: 2rem;
    margin-bottom: 2rem;
    color: white;
    box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
  }

  .header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .header-info {
    display: flex;
    align-items: center;
    gap: 1.5rem;
  }

  .header-icon {
    width: 70px;
    height: 70px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
  }

  .header-title {
    font-size: 2.5rem;
    font-weight: 700;
    margin: 0;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .header-subtitle {
    font-size: 1.1rem;
    opacity: 0.9;
    margin: 0.5rem 0 0 0;
  }

  .header-actions {
    display: flex;
    gap: 0.75rem;
  }

  .btn-modern {
    padding: 0.75rem 1.5rem;
    border-radius: 12px;
    font-weight: 600;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: none;
    cursor: pointer;
  }

  .btn-modern-primary {
    background: rgba(255, 255, 255, 0.9);
    color: #667eea;
    box-shadow: 0 4px 15px rgba(255, 255, 255, 0.3);
  }

  .btn-modern-outline {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    border: 2px solid rgba(255, 255, 255, 0.3);
  }

  .btn-modern:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    text-decoration: none;
  }

  .btn-modern-primary:hover {
    color: #667eea;
  }

  .btn-modern-outline:hover {
    background: rgba(255, 255, 255, 0.3);
    color: white;
  }

  /* Modern Page Header */
  .modern-page-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 20px;
    padding: 2rem;
    margin-bottom: 2rem;
    color: white;
    box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
  }

  .header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .header-info {
    display: flex;
    align-items: center;
    gap: 1.5rem;
  }

  .header-icon {
    width: 70px;
    height: 70px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
  }

  .header-title {
    font-size: 2.5rem;
    font-weight: 700;
    margin: 0;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .header-subtitle {
    font-size: 1.1rem;
    opacity: 0.9;
    margin: 0.5rem 0 0 0;
  }

  .header-actions {
    display: flex;
    gap: 0.75rem;
  }

  .btn-modern {
    padding: 0.75rem 1.5rem;
    border-radius: 12px;
    font-weight: 600;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: none;
    cursor: pointer;
  }

  .btn-modern-primary {
    background: rgba(255, 255, 255, 0.9);
    color: #667eea;
    box-shadow: 0 4px 15px rgba(255, 255, 255, 0.3);
  }

  .btn-modern-outline {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    border: 2px solid rgba(255, 255, 255, 0.3);
  }

  .btn-modern:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    text-decoration: none;
  }

  /* View Grid Layout */
  .view-grid-container {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 2rem;
    align-items: start;
  }

  .view-main-content {
    min-width: 0;
  }

  .view-sidebar {
    min-width: 0;
  }

  /* Modern Cards */
  .modern-card {
    background: white;
    border-radius: 16px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    margin-bottom: 2rem;
    overflow: hidden;
  }

  .card-header {
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    padding: 1.5rem 2rem;
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .card-header.warning {
    background: linear-gradient(135deg, #ffc107 0%, #e0a800 100%);
    color: #212529;
  }

  .header-left {
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  .card-icon {
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.2rem;
  }

  .card-icon.warning {
    background: linear-gradient(135deg, #212529 0%, #495057 100%);
    color: #ffc107;
  }

  .card-title h5 {
    margin: 0;
    font-size: 1.25rem;
    font-weight: 700;
    color: #2d3748;
  }

  .card-header.warning .card-title h5 {
    color: inherit;
  }

  .card-title p {
    margin: 0.25rem 0 0 0;
    font-size: 0.875rem;
    color: #718096;
  }

  .card-header.warning .card-title p {
    color: inherit;
    opacity: 0.8;
  }

  .card-content {
    padding: 2rem;
  }

  /* Account Profile */
  .account-profile {
    display: flex;
    align-items: flex-start;
    gap: 1.5rem;
    padding: 1.5rem;
    background: linear-gradient(135deg, #f8faff 0%, #f0f4ff 100%);
    border-radius: 12px;
    margin-bottom: 2rem;
  }

  .profile-avatar {
    width: 80px;
    height: 80px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 2.5rem;
    flex-shrink: 0;
  }

  .profile-info {
    flex: 1;
    min-width: 0;
  }

  .profile-name {
    font-size: 1.5rem;
    font-weight: 700;
    color: #2d3748;
    margin: 0 0 0.75rem 0;
  }

  .profile-meta {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .meta-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: #4a5568;
    font-size: 0.875rem;
  }

  .meta-item i {
    width: 16px;
    color: #667eea;
  }

  .profile-badges {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .role-badge, .status-badge {
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.875rem;
    font-weight: 600;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
  }

  .role-badge.admin {
    background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
    color: white;
  }

  .role-badge.user {
    background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);
    color: white;
  }

  .status-badge.active {
    background: linear-gradient(135deg, #28a745 0%, #1e7e34 100%);
    color: white;
  }

  .status-badge.inactive {
    background: linear-gradient(135deg, #ffc107 0%, #e0a800 100%);
    color: #212529;
  }

  /* Section Styles */
  .linked-profile-section,
  .password-section {
    margin-bottom: 2rem;
  }

  .section-header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 1rem;
    padding-bottom: 0.75rem;
    border-bottom: 2px solid #e2e8f0;
  }

  .section-header i {
    color: #667eea;
    font-size: 1.25rem;
  }

  .section-header h4 {
    margin: 0;
    font-size: 1.125rem;
    font-weight: 700;
    color: #2d3748;
  }

  /* Linked Profile */
  .linked-profile {
    background: #f7fafc;
    padding: 1.5rem;
    border-radius: 8px;
    border-left: 4px solid #667eea;
    margin-bottom: 1rem;
  }

  .profile-type-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    background: #667eea;
    color: white;
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
    margin-bottom: 1rem;
  }

  .linked-profile-content {
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  .linked-avatar {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    overflow: hidden;
    flex-shrink: 0;
  }

  .linked-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .linked-info {
    flex: 1;
    min-width: 0;
  }

  .linked-info h5 {
    margin: 0 0 0.25rem 0;
    font-weight: 700;
    color: #2d3748;
  }

  .linked-details {
    font-size: 0.875rem;
    color: #718096;
  }

  .view-profile-btn {
    background: rgba(102, 126, 234, 0.1);
    color: #667eea;
    padding: 0.5rem 1rem;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    transition: all 0.3s ease;
  }

  .view-profile-btn:hover {
    background: #667eea;
    color: white;
    text-decoration: none;
  }

  .no-profile {
    text-align: center;
    padding: 2rem;
    color: #718096;
  }

  .no-profile-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
    opacity: 0.5;
  }

  /* Password Section */
  .password-container {
    background: #f7fafc;
    padding: 1.5rem;
    border-radius: 8px;
    border-left: 4px solid #ffc107;
  }

  .password-field {
    display: flex;
    align-items: center;
    background: white;
    border: 2px solid #e2e8f0;
    border-radius: 8px;
    overflow: hidden;
    margin-bottom: 1rem;
  }

  .password-input {
    flex: 1;
    padding: 0.75rem;
    border: none;
    outline: none;
    font-family: monospace;
    font-size: 0.875rem;
  }

  .password-toggle,
  .password-copy {
    padding: 0.75rem;
    background: #f8f9fa;
    border: none;
    cursor: pointer;
    color: #6c757d;
    transition: all 0.3s ease;
  }

  .password-toggle:hover,
  .password-copy:hover {
    background: #e9ecef;
    color: #495057;
  }

  .password-warning {
    display: flex;
    align-items: flex-start;
    gap: 0.5rem;
    color: #856404;
    font-size: 0.875rem;
    line-height: 1.4;
  }

  .password-warning i {
    margin-top: 0.125rem;
    flex-shrink: 0;
  }

  /* Activity Info */
  .activity-info {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .activity-item {
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  .activity-icon {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
    flex-shrink: 0;
  }

  .activity-icon.success {
    background: rgba(40, 167, 69, 0.1);
    color: #28a745;
  }

  .activity-icon.primary {
    background: rgba(0, 123, 255, 0.1);
    color: #007bff;
  }

  .activity-icon.info {
    background: rgba(23, 162, 184, 0.1);
    color: #17a2b8;
  }

  .activity-icon.warning {
    background: rgba(255, 193, 7, 0.1);
    color: #ffc107;
  }

  .activity-icon.danger {
    background: rgba(220, 53, 69, 0.1);
    color: #dc3545;
  }

  .activity-details {
    flex: 1;
    min-width: 0;
  }

  .activity-label {
    font-size: 0.875rem;
    font-weight: 600;
    color: #4a5568;
    margin-bottom: 0.25rem;
  }

  .activity-value {
    font-weight: 700;
    color: #2d3748;
  }

  .activity-value.no-data {
    color: #718096;
    font-style: italic;
  }

  /* Quick Actions - Clean Grid Design */
  .quick-actions-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1rem;
  }

  .quick-action-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    background: #f8f9fa;
    border: 2px solid transparent;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }

  .quick-action-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
  }

  .quick-action-item.warning {
    border-left: 4px solid #ffc107;
  }

  .quick-action-item.warning:hover {
    background: #ffc107;
    color: #212529;
    border-color: #ffc107;
  }

  .quick-action-item.info {
    border-left: 4px solid #17a2b8;
  }

  .quick-action-item.info:hover {
    background: #17a2b8;
    color: white;
    border-color: #17a2b8;
  }

  .quick-action-item.danger {
    border-left: 4px solid #dc3545;
  }

  .quick-action-item.danger:hover {
    background: #dc3545;
    color: white;
    border-color: #dc3545;
  }

  .quick-action-icon {
    width: 50px;
    height: 50px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.25rem;
    flex-shrink: 0;
    transition: all 0.3s ease;
  }

  .quick-action-item.warning .quick-action-icon {
    background: rgba(255, 193, 7, 0.1);
    color: #ffc107;
  }

  .quick-action-item.info .quick-action-icon {
    background: rgba(23, 162, 184, 0.1);
    color: #17a2b8;
  }

  .quick-action-item.danger .quick-action-icon {
    background: rgba(220, 53, 69, 0.1);
    color: #dc3545;
  }

  .quick-action-item:hover .quick-action-icon {
    background: rgba(255, 255, 255, 0.2);
    color: inherit;
    transform: scale(1.1);
  }

  .quick-action-content {
    flex: 1;
    min-width: 0;
  }

  .quick-action-content h6 {
    margin: 0 0 0.25rem 0;
    font-weight: 600;
    font-size: 1rem;
    color: #2d3748;
  }

  .quick-action-content p {
    margin: 0;
    font-size: 0.875rem;
    color: #718096;
    line-height: 1.3;
  }

  .quick-action-item:hover .quick-action-content h6,
  .quick-action-item:hover .quick-action-content p {
    color: inherit;
  }

  /* Sidebar responsive adjustments */
  .view-sidebar .quick-action-item {
    gap: 0.75rem;
    padding: 0.875rem;
  }

  .view-sidebar .quick-action-icon {
    width: 40px;
    height: 40px;
    font-size: 1rem;
  }

  .view-sidebar .quick-action-content h6 {
    font-size: 0.9rem;
  }

  .view-sidebar .quick-action-content p {
    font-size: 0.8rem;
  }

  .view-sidebar .card-content {
    padding: 1.5rem;
  }

  /* Responsive */
  @media (max-width: 991px) {
    .view-grid-container {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }
    
    .view-sidebar {
      order: 2;
    }
    
    .view-main-content {
      order: 1;
    }
  }

  @media (max-width: 768px) {
    .header-content {
      flex-direction: column;
      gap: 1.5rem;
      text-align: center;
    }

    .header-info {
      flex-direction: column;
      text-align: center;
      gap: 1rem;
    }

    .header-title {
      font-size: 2rem;
    }

    .header-icon {
      width: 60px;
      height: 60px;
      font-size: 1.5rem;
    }

    .header-actions {
      flex-direction: column;
      width: 100%;
      gap: 0.5rem;
    }

    .btn-modern {
      justify-content: center;
      width: 100%;
    }

    .account-profile {
      flex-direction: column;
      text-align: center;
    }

    .profile-meta {
      align-items: center;
    }

    .linked-profile-content {
      flex-direction: column;
      text-align: center;
      gap: 1rem;
    }

    .quick-action-item {
      flex-direction: column;
      text-align: center;
      gap: 0.75rem;
      padding: 1rem;
    }

    .quick-action-icon {
      width: 45px !important;
      height: 45px !important;
      font-size: 1.125rem !important;
    }

    .view-sidebar .quick-action-item {
      flex-direction: row;
      text-align: left;
      gap: 0.75rem;
      padding: 0.75rem;
    }

    .view-sidebar .quick-action-icon {
      width: 35px !important;
      height: 35px !important;
      font-size: 0.95rem !important;
    }

    .view-sidebar .quick-action-content h6 {
      font-size: 0.85rem;
    }

    .view-sidebar .quick-action-content p {
      font-size: 0.75rem;
    }
  }
</style>

    <script>
      function resetPassword(id, name) {
        document.getElementById("resetAccountName").textContent = name;
        document.getElementById("resetPasswordForm").action =
          "/admin/account/reset-password/" + id;
        new bootstrap.Modal(
          document.getElementById("resetPasswordModal")
        ).show();
      }

      function deleteAccount(id, name) {
        document.getElementById("deleteAccountName").textContent = name;
        document.getElementById("deleteForm").action =
          "/admin/account/delete/" + id;
        new bootstrap.Modal(document.getElementById("deleteModal")).show();
      }

      function toggleStatus(id, name) {
        document.getElementById("toggleAccountName").textContent = name;
        document.getElementById("toggleStatusForm").action =
          "/admin/account/toggle-status/" + id;
        new bootstrap.Modal(
          document.getElementById("toggleStatusModal")
        ).show();
      }

      function togglePasswordVisibility(fieldId, iconId) {
        const field = document.getElementById(fieldId);
        const icon = document.getElementById(iconId);
        
        if (!field || !icon) {
          console.error('Element not found:', fieldId, iconId);
          return;
        }
        
        if (field.type === 'password') {
          field.type = 'text';
          icon.classList.remove('fa-eye');
          icon.classList.add('fa-eye-slash');
        } else {
          field.type = 'password';
          icon.classList.remove('fa-eye-slash');
          icon.classList.add('fa-eye');
        }
      }

      function copyToClipboard(text) {
        if (!text) {
          console.error('No text to copy');
          return;
        }
        
        if (navigator.clipboard && navigator.clipboard.writeText) {
          navigator.clipboard.writeText(text).then(function() {
            // Show success message
            showToast('Đã sao chép mật khẩu!', 'success');
          }).catch(function(err) {
            console.error('Could not copy text: ', err);
            fallbackCopyTextToClipboard(text);
          });
        } else {
          fallbackCopyTextToClipboard(text);
        }
      }

      function fallbackCopyTextToClipboard(text) {
        const textArea = document.createElement("textarea");
        textArea.value = text;
        textArea.style.position = "fixed";
        textArea.style.left = "-999999px";
        textArea.style.top = "-999999px";
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        
        try {
          const successful = document.execCommand('copy');
          if (successful) {
            showToast('Đã sao chép mật khẩu!', 'success');
          } else {
            showToast('Không thể sao chép. Vui lòng sao chép thủ công.', 'error');
          }
        } catch (err) {
          console.error('Fallback: Could not copy text: ', err);
          showToast('Không thể sao chép. Vui lòng sao chép thủ công.', 'error');
        }
        
        document.body.removeChild(textArea);
      }

      function showToast(message, type) {
        const toast = document.createElement('div');
        const bgClass = type === 'success' ? 'bg-success' : 'bg-danger';
        const icon = type === 'success' ? 'fa-check' : 'fa-exclamation-triangle';
        
        toast.className = `toast align-items-center text-white ${bgClass} border-0 position-fixed`;
        toast.style.cssText = 'top: 20px; right: 20px; z-index: 9999;';
        toast.innerHTML = `
          <div class="d-flex">
            <div class="toast-body">
              <i class="fas ${icon} me-2"></i>${message}
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
          </div>
        `;
        document.body.appendChild(toast);
        
        const bsToast = new bootstrap.Toast(toast);
        bsToast.show();
        
        // Remove toast after it's hidden
        toast.addEventListener('hidden.bs.toast', function() {
          if (document.body.contains(toast)) {
            document.body.removeChild(toast);
          }
        });
      }
    </script>
  </body>
</html>