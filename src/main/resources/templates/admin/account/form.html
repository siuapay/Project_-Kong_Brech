<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/admin-layout :: head}">
    <link href="/static/css/searchable-dropdown.css" rel="stylesheet">
</head>
<body class="modern-admin-page">
    <!-- Sidebar -->
    <nav th:replace="~{fragments/admin-layout :: sidebar}"></nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Top Navigation -->
        <nav th:replace="~{fragments/admin-layout :: topnav}"></nav>

        <!-- Content -->
        <div class="container-fluid py-4">
            <!-- Flash Messages -->
            <div th:replace="~{fragments/admin-layout :: messages}"></div>

            <!-- Modern Page Header -->
            <div class="modern-page-header">
                <div class="header-content">
                    <div class="header-info">
                        <div class="header-icon">
                            <i class="fas fa-user-plus"></i>
                        </div>
                        <div class="header-text">
                            <h1 class="header-title" th:text="${account.id != null ? 'Chỉnh Sửa Tài Khoản' : 'Thêm Tài Khoản Mới'}">Thêm Tài Khoản Mới</h1>
                            <p class="header-subtitle">Nhập thông tin chi tiết của tài khoản</p>
                        </div>
                    </div>
                    <div class="header-actions">
                        <a th:href="@{/admin/account}" class="btn-modern btn-modern-outline">
                            <i class="fas fa-arrow-left me-2"></i>Quay Lại
                        </a>
                    </div>
                </div>
            </div>

            <!-- Modern Form -->
            <div class="row g-4">
                <div class="col-lg-8">
                    <div class="modern-card">
                        <div class="card-header">
                            <div class="header-left">
                                <div class="card-icon">
                                    <i class="fas fa-user-edit"></i>
                                </div>
                                <div class="card-title">
                                    <h5>Thông Tin Tài Khoản</h5>
                                    <p>Điền đầy đủ thông tin để tạo hoặc chỉnh sửa tài khoản</p>
                                </div>
                            </div>
                        </div>
                        <div class="card-content">
                            <form th:action="@{/admin/account/save}" th:object="${account}" method="post">
                                <input type="hidden" th:field="*{id}">

                                <!-- Basic Information Section -->
                                <div class="form-section">
                                    <div class="row g-4">
                                        <div class="col-md-6">
                                            <div class="modern-form-group">
                                                <label for="username" class="modern-form-label">
                                                    <i class="fas fa-user me-2"></i>
                                                    Tên Đăng Nhập <span class="required-star">*</span>
                                                </label>
                                                <input type="text" class="modern-form-control" id="username" th:field="*{username}" 
                                                       required placeholder="Nhập tên đăng nhập" 
                                                       th:readonly="${account.id != null}">
                                                <div class="form-hint">
                                                    <i class="fas fa-info-circle me-1"></i>
                                                    <span th:if="${account.id == null}">Chỉ chữ cái, số, dấu gạch dưới, gạch ngang và dấu chấm. Không có dấu cách</span>
                                                    <span th:if="${account.id != null}">Tên đăng nhập không thể thay đổi sau khi tạo</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="modern-form-group">
                                                <label for="email" class="modern-form-label">
                                                    <i class="fas fa-envelope me-2"></i>
                                                    Email <span class="required-star" id="emailRequired">*</span>
                                                </label>
                                                <input type="email" class="modern-form-control" id="email" th:field="*{email}" 
                                                       placeholder="example@email.com">
                                                <div class="form-hint">
                                                    <i class="fas fa-info-circle me-1"></i>
                                                    <span id="emailHint">Bắt buộc khi không liên kết hồ sơ</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row g-4 mt-2">
                                        <div class="col-12">
                                            <div class="modern-form-group">
                                                <label for="fullName" class="modern-form-label">
                                                    <i class="fas fa-address-card me-2"></i>
                                                    Họ và Tên <span class="required-star" id="fullNameRequired">*</span>
                                                </label>
                                                <input type="text" class="modern-form-control" id="fullName" th:field="*{fullName}" 
                                                       placeholder="Nhập họ và tên đầy đủ">
                                                <div class="form-hint">
                                                    <i class="fas fa-info-circle me-1"></i>
                                                    <span id="fullNameHint">Bắt buộc khi không liên kết hồ sơ</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Profile Link Section -->
                                <div class="form-section">
                                    <div class="row g-4 mt-2">
                                        <div class="col-12">
                                            <label class="modern-form-label">
                                                <i class="fas fa-user-friends me-2"></i>
                                                Liên kết với hồ sơ (tùy chọn)
                                            </label>
                                            <div class="row g-2">
                                                <div class="col-md-6">
                                                    <div class="modern-form-group">
                                                        <div class="form-check">
                                                            <input class="form-check-input" type="radio" name="profileType" id="profileNhanSu" value="nhansu">
                                                            <label class="form-check-label" for="profileNhanSu">
                                                                <i class="fas fa-user text-primary me-1"></i>Nhân Sự
                                                            </label>
                                                        </div>
                                                        <div id="nhanSuDropdown" class="mt-2" style="display: none;"></div>
                                                        <input type="hidden" id="nhanSu" th:field="*{nhanSu.id}">
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="modern-form-group">
                                                        <div class="form-check">
                                                            <input class="form-check-input" type="radio" name="profileType" id="profileChapSu" value="chapsu">
                                                            <label class="form-check-label" for="profileChapSu">
                                                                <i class="fas fa-user-tie text-success me-1"></i>Chấp Sự
                                                            </label>
                                                        </div>
                                                        <div id="chapSuDropdown" class="mt-2" style="display: none;"></div>
                                                        <input type="hidden" id="chapSu" th:field="*{chapSu.id}">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-hint">
                                                <i class="fas fa-info-circle me-1"></i>
                                                Chọn một trong hai loại để liên kết với tài khoản này
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Password Section - Only for new accounts -->
                                <div th:if="${account.id == null}" class="form-section">
                                    <div class="row g-4 mt-2">
                                        <div class="col-12">
                                            <div class="alert alert-info">
                                                <i class="fas fa-info-circle me-2"></i>
                        <strong>Mật khẩu tự động:</strong> Hệ thống sẽ tự động tạo mật khẩu ngẫu nhiên cho tài khoản mới. 
                        Mật khẩu sẽ được hiển thị sau khi tạo thành công.
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Update Info - Only for existing accounts -->
                                <div th:if="${account.id != null}" class="form-section">
                                    <div class="row g-4 mt-2">
                                        <div class="col-12">
                                            <div class="alert alert-warning">
                                                <i class="fas fa-exclamation-triangle me-2"></i>
                                                <strong>Lưu ý:</strong> Chỉ có thể cập nhật thông tin cơ bản. 
                                                Để thay đổi mật khẩu, vui lòng sử dụng chức năng "Reset Mật Khẩu" trong danh sách tài khoản.
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Role and Status Section -->
                                <div class="form-section">
                                    <div class="row g-4 mt-2">
                                        <div class="col-md-6">
                                            <div class="modern-form-group">
                                                <label for="role" class="modern-form-label">
                                                    <i class="fas fa-shield-alt me-2"></i>
                                                    Quyền Hạn <span class="required-star">*</span>
                                                </label>
                                                <select class="modern-form-select" id="role" th:field="*{role}" required>
                                                    <option th:each="role : ${T(com.branch.demo.domain.Account.Role).values()}" 
                                                            th:value="${role}" th:text="${role.displayName}">
                                                    </option>
                                                </select>
                                                <div class="form-hint">
                                                    <i class="fas fa-exclamation-triangle me-1 text-warning"></i>
                                                    Chỉ Admin mới có quyền truy cập hệ thống quản lý
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="modern-form-group">
                                                <label for="status" class="modern-form-label">
                                                    <i class="fas fa-toggle-on me-2"></i>
                                                    Trạng Thái <span class="required-star">*</span>
                                                </label>
                                                <select class="modern-form-select" id="status" th:field="*{status}" required>
                                                    <option th:each="status : ${T(com.branch.demo.domain.Account.AccountStatus).values()}" 
                                                            th:value="${status}" th:text="${status.displayName}">
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Form Actions -->
                                <div class="form-actions">
                                    <div class="actions-container">
                                        <a th:href="@{/admin/account}" class="btn-cancel">
                                            <i class="fas fa-times me-2"></i>Hủy Bỏ
                                        </a>
                                        <button type="submit" class="btn-submit">
                                            <i class="fas fa-save me-2"></i>
                                            <span th:text="${account.id != null ? 'Cập Nhật' : 'Tạo Tài Khoản'}">Tạo Tài Khoản</span>
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Modern Sidebar -->
                <div class="col-lg-4">
                    <div class="modern-card">
                        <div class="card-header">
                            <div class="header-left">
                                <div class="card-icon">
                                    <i class="fas fa-info-circle"></i>
                                </div>
                                <div class="card-title">
                                    <h5>Hướng Dẫn</h5>
                                    <p>Hỗ trợ sử dụng form</p>
                                </div>
                            </div>
                        </div>
                        <div class="card-content">
                            <h6 class="text-primary">Quyền Hạn:</h6>
                            <ul class="list-unstyled">
                                <li class="mb-2">
                                    <span class="badge bg-danger me-2">ADMIN</span>
                                    Toàn quyền quản lý hệ thống
                                </li>
                                <li class="mb-2">
                                    <span class="badge bg-info me-2">MODERATOR</span>
                                    Quyền điều hành nội dung
                                </li>
                                <li class="mb-2">
                                    <span class="badge bg-secondary me-2">USER</span>
                                    Quyền người dùng cơ bản
                                </li>
                            </ul>

                            <hr>

                            <h6 class="text-primary">Trạng Thái:</h6>
                            <ul class="list-unstyled">
                                <li class="mb-2">
                                    <span class="badge bg-success me-2">ACTIVE</span>
                                    Tài khoản hoạt động bình thường
                                </li>
                                <li class="mb-2">
                                    <span class="badge bg-warning me-2">INACTIVE</span>
                                    Tài khoản tạm khóa
                                </li>
                                <li class="mb-2">
                                    <span class="badge bg-danger me-2">LOCKED</span>
                                    Tài khoản bị khóa
                                </li>
                            </ul>

                            <hr>

                            <h6 class="text-primary">Liên Kết Hồ Sơ:</h6>
                            <p class="small text-muted mb-2">
                                Bạn có thể liên kết tài khoản này với một nhân sự hoặc chấp sự trong hệ thống. 
                                Khi liên kết, thông tin cá nhân sẽ được lấy từ hồ sơ tương ứng.
                            </p>
                            <ul class="list-unstyled small">
                                <li class="mb-1">
                                    <i class="fas fa-user text-primary me-2"></i>
                                    <strong>Nhân Sự:</strong> Liên kết với hồ sơ nhân sự
                                </li>
                                <li class="mb-1">
                                    <i class="fas fa-user-tie text-success me-2"></i>
                                    <strong>Chấp Sự:</strong> Liên kết với hồ sơ chấp sự
                                </li>
                                <li class="mb-1">
                                    <i class="fas fa-check text-success me-2"></i>
                                    <strong>Có liên kết:</strong> Email và Họ tên không bắt buộc
                                </li>
                                <li class="mb-1">
                                    <i class="fas fa-exclamation text-warning me-2"></i>
                                    <strong>Không liên kết:</strong> Email và Họ tên bắt buộc nhập
                                </li>
                            </ul>

                            <hr>

                            <div class="alert alert-warning">
                                <i class="fas fa-exclamation-triangle me-2"></i>
                                <strong>Lưu ý:</strong> Chỉ tài khoản có quyền ADMIN mới có thể truy cập vào hệ thống quản lý.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <div th:replace="~{fragments/admin-layout :: scripts}"></div>
    <script src="/static/js/searchable-dropdown.js"></script>

    <script th:inline="javascript">
        // Global variables
        let allNhanSu = [];
        let allChapSu = [];
        let nhanSuDropdown;
        let chapSuDropdown;
        
        // Account data from Thymeleaf
        const currentAccount = {
            id: /*[[${account.id}]]*/ null,
            nhanSuId: /*[[${account.nhanSu?.id}]]*/ null,
            chapSuId: /*[[${account.chapSu?.id}]]*/ null
        };
        
        const isEditMode = currentAccount.id !== null;
        
        document.addEventListener('DOMContentLoaded', function() {
            loadAllData();
            initializeProfileRadios();
            initializeRequiredFieldLogic();
            // Initialize existing data after a short delay to ensure DOM is ready
            setTimeout(() => {
                initializeExistingData();
                updateRequiredFields();
            }, 200);
        });
        
        // Load all data from APIs
        async function loadAllData() {
            try {
                let nhanSuUrl, chapSuUrl;
                
                if (isEditMode) {
                    // EDIT mode: Load all active + current account's person
                    nhanSuUrl = `/admin/api/nhan-su-for-account-edit?accountId=${currentAccount.id}`;
                    chapSuUrl = `/admin/api/chap-su-for-account-edit?accountId=${currentAccount.id}`;
                } else {
                    // CREATE mode: Only load those without account
                    nhanSuUrl = '/admin/api/nhan-su-without-account';
                    chapSuUrl = '/admin/api/chap-su-without-account';
                }
                
                const [nhanSuResponse, chapSuResponse] = await Promise.all([
                    fetch(nhanSuUrl),
                    fetch(chapSuUrl)
                ]);
                
                if (nhanSuResponse.ok && chapSuResponse.ok) {
                    allNhanSu = await nhanSuResponse.json();
                    allChapSu = await chapSuResponse.json();
                    
                    console.log(`Loaded nhân sự (${isEditMode ? 'edit' : 'create'} mode):`, allNhanSu.length);
                    console.log(`Loaded chấp sự (${isEditMode ? 'edit' : 'create'} mode):`, allChapSu.length);
                }
            } catch (error) {
                console.error('Error loading data:', error);
            }
        }
        
        // Initialize profile type radio buttons
        function initializeProfileRadios() {
            const profileNhanSuRadio = document.getElementById('profileNhanSu');
            const profileChapSuRadio = document.getElementById('profileChapSu');
            
            profileNhanSuRadio.addEventListener('change', function() {
                if (this.checked) {
                    showProfileDropdown('nhansu');
                    hideProfileDropdown('chapsu');
                    // Clear ChapSu selection
                    document.getElementById('chapSu').value = '';
                    updateRequiredFields();
                }
            });
            
            profileChapSuRadio.addEventListener('change', function() {
                if (this.checked) {
                    showProfileDropdown('chapsu');
                    hideProfileDropdown('nhansu');
                    // Clear NhanSu selection
                    document.getElementById('nhanSu').value = '';
                    updateRequiredFields();
                }
            });
        }
        
        // Initialize required field logic
        function initializeRequiredFieldLogic() {
            // Add event listeners for dropdown selections
            document.addEventListener('change', function(e) {
                if (e.target.id === 'nhanSu' || e.target.id === 'chapSu') {
                    updateRequiredFields();
                }
            });
            
            // Add event listener for clearing selections
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('clear-selection')) {
                    setTimeout(updateRequiredFields, 100);
                }
            });
        }
        
        // Update required fields based on profile selection
        function updateRequiredFields() {
            const nhanSuId = document.getElementById('nhanSu').value;
            const chapSuId = document.getElementById('chapSu').value;
            const hasProfileLink = (nhanSuId && nhanSuId.trim() !== '') || (chapSuId && chapSuId.trim() !== '');
            
            const emailField = document.getElementById('email');
            const fullNameField = document.getElementById('fullName');
            const emailRequired = document.getElementById('emailRequired');
            const fullNameRequired = document.getElementById('fullNameRequired');
            const emailHint = document.getElementById('emailHint');
            const fullNameHint = document.getElementById('fullNameHint');
            
            if (hasProfileLink) {
                // Has profile link - not required
                emailField.removeAttribute('required');
                fullNameField.removeAttribute('required');
                emailRequired.style.display = 'none';
                fullNameRequired.style.display = 'none';
                emailHint.textContent = 'Tùy chọn khi đã liên kết hồ sơ';
                fullNameHint.textContent = 'Tùy chọn khi đã liên kết hồ sơ';
            } else {
                // No profile link - required
                emailField.setAttribute('required', 'required');
                fullNameField.setAttribute('required', 'required');
                emailRequired.style.display = 'inline';
                fullNameRequired.style.display = 'inline';
                emailHint.textContent = 'Bắt buộc khi không liên kết hồ sơ';
                fullNameHint.textContent = 'Bắt buộc khi không liên kết hồ sơ';
            }
        }
        
        // Show profile dropdown
        function showProfileDropdown(type) {
            const dropdownContainer = document.getElementById(`${type === 'nhansu' ? 'nhanSu' : 'chapSu'}Dropdown`);
            dropdownContainer.style.display = 'block';
            
            if (type === 'nhansu') {
                createNhanSuDropdown();
            } else {
                createChapSuDropdown();
            }
        }
        
        // Hide profile dropdown
        function hideProfileDropdown(type) {
            const dropdownContainer = document.getElementById(`${type === 'nhansu' ? 'nhanSu' : 'chapSu'}Dropdown`);
            dropdownContainer.style.display = 'none';
            dropdownContainer.innerHTML = '';
        }
        
        // Create Nhân Sự dropdown
        function createNhanSuDropdown() {
            const container = document.getElementById('nhanSuDropdown');
            const currentValue = document.getElementById('nhanSu').value;
            
            if (container) {
                if (!allNhanSu || allNhanSu.length === 0) {
                    container.innerHTML = '<div class="alert alert-info"><i class="fas fa-info-circle me-2"></i>Tất cả nhân sự đã có tài khoản</div>';
                    return;
                }
                nhanSuDropdown = new SearchableDropdown(container, {
                    data: allNhanSu,
                    placeholder: 'Tìm kiếm nhân sự...',
                    displayField: 'hoTen',
                    valueField: 'id',
                    searchFields: ['hoTen', 'email', 'dienThoai'],
                    allowClear: true,
                    clearText: 'Không chọn nhân sự',
                    formatDisplayHTML: function(item) {
                        let html = '<div class="d-flex flex-column">';
                        html += '<div class="fw-medium">' + item.hoTen + '</div>';
                        if (item.chucVu) {
                            html += '<small class="text-muted">' + item.chucVu + '</small>';
                        }
                        html += '</div>';
                        return html;
                    },
                    onSelect: function(item) {
                        document.getElementById('nhanSu').value = item.id;
                        updateRequiredFields();
                    },
                    onClear: function() {
                        document.getElementById('nhanSu').value = '';
                        updateRequiredFields();
                    }
                });
                
                // Set selected value after creating dropdown
                if (currentValue && currentValue.trim() !== '') {
                    setTimeout(() => {
                        nhanSuDropdown.setValue(currentValue);
                    }, 100);
                }
            }
        }
        
        // Create Chấp Sự dropdown
        function createChapSuDropdown() {
            const container = document.getElementById('chapSuDropdown');
            const currentValue = document.getElementById('chapSu').value;
            
            if (container) {
                if (!allChapSu || allChapSu.length === 0) {
                    container.innerHTML = '<div class="alert alert-info"><i class="fas fa-info-circle me-2"></i>Tất cả chấp sự đã có tài khoản</div>';
                    return;
                }
                chapSuDropdown = new SearchableDropdown(container, {
                    data: allChapSu,
                    placeholder: 'Tìm kiếm chấp sự...',
                    displayField: 'hoTen',
                    valueField: 'id',
                    searchFields: ['hoTen', 'email', 'dienThoai'],
                    allowClear: true,
                    clearText: 'Không chọn chấp sự',
                    formatDisplayHTML: function(item) {
                        let html = '<div class="d-flex flex-column">';
                        html += '<div class="fw-medium">' + item.hoTen + '</div>';
                        if (item.chucVu) {
                            html += '<small class="text-muted">' + item.chucVu + '</small>';
                        }
                        html += '</div>';
                        return html;
                    },
                    onSelect: function(item) {
                        document.getElementById('chapSu').value = item.id;
                        updateRequiredFields();
                    },
                    onClear: function() {
                        document.getElementById('chapSu').value = '';
                        updateRequiredFields();
                    }
                });
                
                // Set selected value after creating dropdown
                if (currentValue && currentValue.trim() !== '') {
                    setTimeout(() => {
                        chapSuDropdown.setValue(currentValue);
                    }, 100);
                }
            }
        }
        
        // Initialize existing data (for edit mode)
        function initializeExistingData() {
            const nhanSuId = document.getElementById('nhanSu').value;
            const chapSuId = document.getElementById('chapSu').value;
            
            if (nhanSuId && nhanSuId.trim() !== '') {
                document.getElementById('profileNhanSu').checked = true;
                showProfileDropdown('nhansu');
            } else if (chapSuId && chapSuId.trim() !== '') {
                document.getElementById('profileChapSu').checked = true;
                showProfileDropdown('chapsu');
            }
        }
    </script>

    <style>
        /* Modern Admin Page Styles */
        .modern-admin-page {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%) !important;
            min-height: 100vh;
        }

        /* Modern Page Header */
        .modern-page-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            color: white;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-info {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .header-icon {
            width: 70px;
            height: 70px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
        }

        .header-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin: 0;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .header-subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            margin: 0.5rem 0 0 0;
        }

        .header-actions {
            display: flex;
            gap: 1rem;
        }

        /* Modern Buttons */
        .btn-modern {
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: none;
            cursor: pointer;
        }

        .btn-modern-outline {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .btn-modern-outline:hover {
            background: rgba(255, 255, 255, 0.3);
            color: white;
            text-decoration: none;
        }

        /* Modern Cards */
        .modern-card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .card-header {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 1.5rem 2rem;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .card-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
        }

        .card-title h5 {
            margin: 0;
            font-size: 1.25rem;
            font-weight: 700;
            color: #2d3748;
        }

        .card-title p {
            margin: 0.25rem 0 0 0;
            font-size: 0.875rem;
            color: #718096;
        }

        .card-content {
            padding: 2rem;
        }

        /* Form Sections */
        .form-section {
            margin-bottom: 2rem;
        }

        /* Modern Form Controls */
        .modern-form-group {
            margin-bottom: 1.5rem;
        }

        .modern-form-label {
            display: flex;
            align-items: center;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 1rem;
            font-size: 0.875rem;
        }

        .required-star {
            color: #e53e3e;
            margin-left: 0.25rem;
        }

        .modern-form-control,
        .modern-form-select {
            width: 100%;
            padding: 0.875rem 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
            box-sizing: border-box;
        }

        .modern-form-control:focus,
        .modern-form-select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-hint {
            color: #718096;
            font-size: 0.75rem;
            margin-top: 0.25rem;
        }

        /* Form Actions */
        .form-actions {
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid #e2e8f0;
        }

        .actions-container {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }

        .btn-cancel {
            padding: 0.875rem 2rem;
            background: #f7fafc;
            color: #4a5568;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            transition: all 0.3s ease;
        }

        .btn-cancel:hover {
            background: #edf2f7;
            color: #2d3748;
            text-decoration: none;
        }

        .btn-submit {
            padding: 0.875rem 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .actions-container {
                flex-direction: column;
            }
        }
    </style>
</body>
</html>