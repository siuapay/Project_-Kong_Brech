<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
  <head th:replace="~{fragments/client-layout :: head}"></head>
  <body>
    <!-- Navigation -->
    <nav th:replace="~{fragments/client-layout :: navbar}"></nav>

    <!-- Page Header -->
    <section class="py-5 bg-primary-custom text-white">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto text-center">
            <h1 class="display-4 fw-bold mb-3">Danh Sách Điểm Nhóm</h1>
            <p class="lead">
              Thông tin và thống kê các điểm nhóm trong chi hội
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Statistics Section -->
    <section class="py-4 bg-light">
      <div class="container">
        <div class="row">
          <div class="col-lg-6 col-md-6 mb-3">
            <div class="card bg-primary text-white h-100">
              <div class="card-body text-center">
                <i class="fas fa-map-marker-alt fa-3x mb-3"></i>
                <h3 class="mb-2" th:text="${totalDiemNhom}">0</h3>
                <p class="mb-0">Tổng Điểm Nhóm</p>
              </div>
            </div>
          </div>
          <div class="col-lg-6 col-md-6 mb-3">
            <div class="card bg-success text-white h-100">
              <div class="card-body text-center">
                <i class="fas fa-check-circle fa-3x mb-3"></i>
                <h3 class="mb-2" th:text="${diemDangHoatDong}">0</h3>
                <p class="mb-0">Đang Hoạt Động</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Điểm Nhóm List -->
    <section class="py-5">
      <div class="container">
        <div class="row">
          <div class="col-12">
            <div class="card">
              <div class="card-header bg-primary text-white">
                <h5 class="mb-0">
                  <i class="fas fa-map-marker-alt me-2"></i>Danh Sách Điểm Nhóm
                </h5>
              </div>
              <div class="card-body">
                <div th:if="${diemNhomList != null and !diemNhomList.empty}">
                  <div class="row">
                    <div class="col-lg-6 mb-4" th:each="diemNhom : ${diemNhomList}">
                      <div class="card h-100 border-0 shadow-sm">
                        <div class="card-header bg-light border-0">
                          <div class="d-flex justify-content-between align-items-center">
                            <h6 class="mb-0 fw-bold text-primary">
                              <i class="fas fa-home me-2"></i>
                              <span th:text="${diemNhom.tenDiemNhom}">Tên điểm nhóm</span>
                            </h6>
                            <span class="badge" 
                                  th:classappend="${diemNhom.trangThai?.name() == 'HOAT_DONG'} ? 'bg-success' : 'bg-secondary'"
                                  th:text="${diemNhom.trangThai?.name() == 'HOAT_DONG'} ? 'Hoạt động' : 'Tạm ngưng'">
                              Hoạt động
                            </span>
                          </div>
                        </div>
                        <div class="card-body">
                          <!-- Địa chỉ -->
                          <div class="mb-3">
                            <small class="text-muted d-block">
                              <i class="fas fa-map-marker-alt me-2 text-primary"></i>
                              <strong>Địa chỉ:</strong>
                            </small>
                            <span th:if="${diemNhom.diaChi}" th:text="${diemNhom.diaChi}">123 Đường ABC, Quận XYZ</span>
                            <span th:unless="${diemNhom.diaChi}" class="text-muted">Chưa cập nhật địa chỉ</span>
                          </div>

                          <!-- Số tín hữu -->
                          <div class="mb-3">
                            <small class="text-muted d-block">
                              <i class="fas fa-users me-2 text-primary"></i>
                              <strong>Số tín hữu:</strong>
                            </small>
                            <span class="fw-bold text-success" th:text="${diemNhom.getTongSoTinHuu()} + ' người'">85 người</span>
                          </div>

                          <!-- Nhân sự phụ trách -->
                          <div class="mb-3">
                            <small class="text-muted d-block">
                              <i class="fas fa-user-tie me-2 text-primary"></i>
                              <strong>Nhân sự phụ trách:</strong>
                            </small>
                            <div th:if="${diemNhom.danhSachNhanSuTrucTiep != null and !diemNhom.danhSachNhanSuTrucTiep.empty}">
                              <div th:each="nhanSu : ${diemNhom.danhSachNhanSuTrucTiep}" class="mb-1">
                                <span class="badge bg-info me-1" th:text="${nhanSu.hoTen}">Tên nhân sự</span>
                              </div>
                            </div>
                            <span th:if="${diemNhom.danhSachNhanSuTrucTiep == null or diemNhom.danhSachNhanSuTrucTiep.empty}" 
                                  class="text-muted">Chưa có nhân sự phụ trách</span>
                          </div>

                          <!-- Số nhóm -->
                          <div class="mb-3">
                            <small class="text-muted d-block">
                              <i class="fas fa-layer-group me-2 text-primary"></i>
                              <strong>Số nhóm:</strong>
                            </small>
                            <span class="fw-bold text-info" th:text="${diemNhom.danhSachNhom.size()} + ' nhóm'">3 nhóm</span>
                          </div>

                          <!-- Mô tả -->
                          <div th:if="${diemNhom.moTa}" class="mb-3">
                            <small class="text-muted d-block">
                              <i class="fas fa-info-circle me-2 text-primary"></i>
                              <strong>Mô tả:</strong>
                            </small>
                            <p class="mb-0 text-muted" th:text="${#strings.abbreviate(diemNhom.moTa, 100)}">Mô tả điểm nhóm...</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Empty State -->
                <div th:if="${diemNhomList == null or diemNhomList.empty}" class="text-center py-5">
                  <i class="fas fa-map-marker-alt fa-3x text-muted mb-3"></i>
                  <h5 class="text-muted">Chưa có điểm nhóm nào</h5>
                  <p class="text-muted">Hiện tại chưa có điểm nhóm nào được tạo trong hệ thống.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Nhóm List -->
    <section class="py-5 bg-light">
      <div class="container">
        <div class="row">
          <div class="col-12">
            <div class="card">
              <div class="card-header bg-info text-white">
                <h5 class="mb-0">
                  <i class="fas fa-layer-group me-2"></i>Danh Sách Nhóm
                </h5>
              </div>
              <div class="card-body">
                <div th:if="${nhomList != null and !nhomList.empty}">
                  <div class="row">
                    <div class="col-lg-4 col-md-6 mb-3" th:each="nhom : ${nhomList}">
                      <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body">
                          <h6 class="card-title text-primary fw-bold">
                            <i class="fas fa-users me-2"></i>
                            <span th:text="${nhom.tenNhom}">Tên nhóm</span>
                          </h6>
                          
                          <div class="mb-2">
                            <small class="text-muted">Điểm nhóm:</small>
                            <div th:if="${nhom.diemNhom}">
                              <span class="badge bg-primary" th:text="${nhom.diemNhom.tenDiemNhom}">Tên điểm nhóm</span>
                            </div>
                            <div th:unless="${nhom.diemNhom}">
                              <span class="text-muted">Chưa thuộc điểm nhóm nào</span>
                            </div>
                          </div>
                          
                          <div class="mb-2">
                            <small class="text-muted">Số tín hữu:</small>
                            <span class="fw-bold text-success ms-2" th:text="${nhom.soLuongTinHuu} + ' người'">12 người</span>
                          </div>
                          
                          <div th:if="${nhom.moTa}" class="mb-2">
                            <small class="text-muted">Mô tả:</small>
                            <p class="mb-0 small text-muted" th:text="${#strings.abbreviate(nhom.moTa, 80)}">Mô tả nhóm...</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Empty State -->
                <div th:if="${nhomList == null or nhomList.empty}" class="text-center py-5">
                  <i class="fas fa-layer-group fa-3x text-muted mb-3"></i>
                  <h5 class="text-muted">Chưa có nhóm nào</h5>
                  <p class="text-muted">Hiện tại chưa có nhóm nào được tạo trong hệ thống.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Map Section (Placeholder) -->
    <section class="py-5">
      <div class="container">
        <div class="row">
          <div class="col-12">
            <div class="card">
              <div class="card-header bg-warning text-dark">
                <h5 class="mb-0">
                  <i class="fas fa-map me-2"></i>Bản Đồ Điểm Nhóm
                </h5>
              </div>
              <div class="card-body">
                <div class="text-center py-5">
                  <i class="fas fa-map fa-3x text-muted mb-3"></i>
                  <h5 class="text-muted">Bản đồ điểm nhóm</h5>
                  <p class="text-muted">Tính năng bản đồ sẽ được cập nhật trong phiên bản tiếp theo.</p>
                  <button class="btn btn-outline-primary" disabled>
                    <i class="fas fa-map-marker-alt me-2"></i>Xem trên bản đồ
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer th:replace="~{fragments/client-layout :: footer}"></footer>

    <!-- Scripts -->
    <div th:replace="~{fragments/client-layout :: scripts}"></div>

    <style>
      .card:hover {
        transform: translateY(-2px);
        transition: transform 0.2s;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      }
      
      .badge {
        font-size: 0.75rem;
      }
      
      .card-title {
        font-size: 1.1rem;
      }
      
      .text-primary {
        color: var(--primary-color) !important;
      }
      
      .bg-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
      }
      
      .bg-info {
        background: linear-gradient(135deg, #17a2b8 0%, #138496 100%) !important;
      }
      
      .bg-warning {
        background: linear-gradient(135deg, #ffc107 0%, #e0a800 100%) !important;
      }
    </style>
  </body>
</html>